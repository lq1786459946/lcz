import{u as Se}from"./dXGWV11w.js";import{$ as z}from"./VpPsBD4i.js";import{x as Z,r as w,J as Oe,c as B,o as y,w as b,a as c,u as f,b as P,M as W,d as A,t as F,f as N,V,q as re,i as X,g as C,k as q,P as ze,_ as Le,F as J,h as G,Z as Fe,a5 as oe,a6 as j,v as Ke,e as Me}from"./CnuomZrk.js";import{r as Q}from"./BnDZIIlj.js";import{_ as Ue}from"./BkoGZOYh.js";import{_ as Re}from"./DxMjXUHf.js";import{u as qe,S as He,P as Ze,U as We,E as Xe}from"./C9zGyex1.js";import{T as Je}from"./BsKgkAtJ.js";import{C as Ye}from"./CVj2jVhd.js";import{a as je}from"./CnmJC19Y.js";import{a as Ge}from"./C2EtQ1_T.js";import{a as Qe}from"./DBJEOAoP.js";import{a as et}from"./6TMbnBfM.js";import{a as tt}from"./BCfOgbHO.js";import{a as nt}from"./D9z1JSye.js";import{V as at}from"./DpX84nPs.js";import{V as ee}from"./ZIjcLsd1.js";import{V as pe}from"./Cj1spGCk.js";import{V as rt,a as M}from"./B3ly5q52.js";import{V as se}from"./DRUaJwo7.js";import{V as ue}from"./BaaSpYbF.js";import{V as ge}from"./9_89H3jd.js";import{V as he}from"./-fAUXWz3.js";import{V as be}from"./C5itGDkh.js";import{V as ot}from"./ZeQffqNp.js";import{V as lt}from"./B1cM5iYL.js";import{_ as it}from"./2BlOukxT.js";import{V as st}from"./BM5uu3-6.js";import{V as dt}from"./J8NvyoUP.js";import{V as ct}from"./CcLwsTP6.js";import{V as ut}from"./BQV00918.js";import{V as ft}from"./DxYFOQYt.js";import"./cDhjtOJI.js";import"./CqzD6X7m.js";import"./KEzkHOjn.js";import"./DY7PVvcf.js";import"./DmoV_8k7.js";import"./C-GTDzx5.js";/* empty css        *//* empty css        */import"./DWpBGHOm.js";import"./oSMZqe4k.js";import"./BErCBOBj.js";import"./Bjdq3k92.js";import"./RgM8UNVF.js";import"./Cbcoqhwy.js";import"./D-PTy7x9.js";import"./DUPbah5Z.js";import"./CYA0dyx_.js";import"./B0wkeW91.js";function mt(e,t){var n=!1;return function(...a){n||(e.call(null,...a),n=!0,setTimeout(function(){n=!1},t))}}function ve(e){return e.split(" ").filter(t=>t)}var De=typeof window<"u";function U(e,t,n=!1){if(!t)return;const a=ve(t);if(a.length&&!a.includes("longTouch"))for(const r of e){if(!Y(r)||!$.has(r)){r.classList.add(...a);continue}const o=[],l=$.get(r);if(l){for(const i of a)r.classList.contains(i)?r.classList.contains(i)&&n===!1&&o.push(i):r.classList.add(i);l.privateClasses=o,$.set(r,l)}}}function te(e,t){if(!t)return;const n=ve(t);if(n.length)for(const a of e){if(!Y(a)){a.classList.remove(...n);continue}const r=$.get(a);if(r)for(const o of n)r.privateClasses.includes(o)||a.classList.remove(o)}}function ye(e){let t=e.parentNode;for(;t!==null&&t.nodeType===1&&t instanceof HTMLElement;){const a=window.getComputedStyle(t).getPropertyValue("overflow");if(a==="scroll"||a==="auto")return t;t=t.parentNode}return document.documentElement}function pt(e){if(!(e.e instanceof TouchEvent))return;const t=e.e.touches[0].clientX,n=e.e.touches[0].clientY;let a=document.elementFromPoint(t,n);if(!Y(a))return;let r,o=!0;for(;a&&o;){if($.has(a)||E.has(a)){o=!1,r=E.has(a);break}a=a.parentNode}if(r){const l=E.get(a);return l?{parent:{el:a,data:l}}:void 0}else{const l=$.get(a);if(!l)return;const i=E.get(a.parentNode);return i?{node:{el:a,data:l},parent:{el:a.parentNode,data:i}}:void 0}}function Y(e){return e instanceof HTMLElement&&e.parentNode instanceof HTMLElement}function Ne(e,t){const n=new AbortController;for(const a in t){const r=t[a];e.addEventListener(a,r,{signal:n.signal,passive:!1})}return n}function we(e,t,n=!1){const a=window.getComputedStyle(e),r=["position","z-index","top","left","x","pointer-events","y","transform-origin","filter","-webkit-text-fill-color"];for(const o of Array.from(a))n===!1&&o&&r.includes(o)||t.style.setProperty(o,a.getPropertyValue(o),a.getPropertyPriority(o));for(const o of Array.from(e.children)){if(!Y(o))continue;const l=t.children[Array.from(e.children).indexOf(o)];we(o,l,n)}}function R(e){return e instanceof DragEvent?{x:e.clientX,y:e.clientY}:{x:e.touches[0].clientX,y:e.touches[0].clientY}}Array();function xe(e={}){const t=[{transform:`translateY(${e.yScale||50}%)`},{transform:`translateY(${e.yScale||0}%)`}],n=[{transform:`translateY(-${e.yScale||50}%)`},{transform:`translateY(${e.yScale||0}%)`}],a=[{transform:`translateX(${e.xScale||50}%)`},{transform:`translateX(${e.xScale||0}%)`}],r=[{transform:`translateX(-${e.xScale||50}%)`},{transform:`translateX(${e.xScale||0}%)`}];return o=>{if(E.get(o))return{setup(){document.head.querySelector("[data-drag-and-drop]")},setupNodeRemap(i){if(!s)return;const d=e.duration||150;if(i.nodeData.value===s.draggedNode.data.value){switch(s.incomingDirection){case"below":O(i.node,t,d);break;case"above":O(i.node,n,d);break;case"left":O(i.node,r,d);break;case"right":O(i.node,a,d);break}return}if(!s.affectedNodes.map(I=>I.data.value).includes(i.nodeData.value))return;const m=i.node.getBoundingClientRect(),p=s.affectedNodes.findIndex(I=>I.data.value===i.nodeData.value),T=s.draggedNode.data.index>=s.targetIndex;let v;if(T?v=s.affectedNodes[p+1]?s.affectedNodes[p+1]:s.affectedNodes[p-1]:v=s.affectedNodes[p-1]?s.affectedNodes[p-1]:s.affectedNodes[p+1],v){const I=Math.abs(m.x-v.el.getBoundingClientRect().x),k=Math.abs(m.y-v.el.getBoundingClientRect().y);I>k&&T?O(i.node,r,d):I>k&&!T&&O(i.node,a,d)}else switch(s.incomingDirection){case"below":O(i.node,n,d);break;case"above":O(i.node,t,d);break;case"left":O(i.node,a,d);break;case"right":O(i.node,r,d);break}}}}}function O(e,t,n){s&&(s.preventEnter=!0,e.animate(t,{duration:n}),setTimeout(()=>{s&&(s.preventEnter=!1)},n))}Array();Array();var fe={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]},$=new WeakMap,E=new WeakMap,s=void 0;function gt(){s=void 0}function ke(e){return s={ascendingDirection:!1,incomingDirection:void 0,enterCount:0,targetIndex:0,affectedNodes:[],lastValue:void 0,activeNode:void 0,lastTargetValue:void 0,remapJustFinished:!1,preventEnter:!1,clonedDraggedEls:[],originalZIndex:void 0,transferred:!1,...e},s}function ht(e,t){return s={...e,...t},s}function Te(e){const{x:t,y:n}=R(e.e);return{coordinates:{x:t,y:n},draggedNode:{el:e.targetData.node.el,data:e.targetData.node.data},draggedNodes:[{el:e.targetData.node.el,data:e.targetData.node.data}],initialIndex:e.targetData.node.data.index,initialParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},lastParent:{el:e.targetData.parent.el,data:e.targetData.parent.data},scrollParent:ye(e.targetData.node.el)}}function bt(e,t){const n=Ie(e),r=[...le(t.targetData.parent.el,t.targetData.parent.data).filter(o=>!n.includes(o))];r.splice(t.targetData.node.data.index,0,...n),e.lastTargetValue=t.targetData.node.data.value,ie(t.targetData.parent.el,t.targetData.parent.data,[...r])}function le(e,t){return[...t.getValues(e)]}function ie(e,t,n){t.setValues(n,e)}function Ie(e){return[...e.draggedNodes.map(t=>t.data.value)]}function vt({parent:e,getValues:t,setValues:n,config:a={}}){var l,i,d;if(!De)return;document.addEventListener("dragover",m=>{if(m.preventDefault(),!($.has(m.target)||E.has(m.target))&&s){s.remapJustFinished=!1,s.lastTargetValue=void 0;const{x:p,y:g}=R(m);s.coordinates.y=g,s.coordinates.x=p,ne()}}),Dt(e);const r={getValues:t,setValues:n,config:{handleDragstart:xt,handleDragoverNode:Xt,handleDragoverParent:Jt,handleEnd:Pe,handleTouchstart:$t,handleTouchmove:Lt,handleTouchOverNode:Ct,handleTouchOverParent:Yt,handleDragenterNode:Gt,handleDragleaveNode:Qt,performSort:bt,performTransfer:Ae,root:document,setupNode:Pt,setupNodeRemap:Ce,reapplyDragClasses:Et,tearDownNode:Bt,tearDownNodeRemap:_t,remapFinished:wt,scrollBehavior:{x:.8,y:.8},threshold:{horizontal:0,vertical:0},...a},enabledNodes:[],abortControllers:{}};new MutationObserver(Nt).observe(e,{childList:!0}),E.set(e,r),(l=a.plugins)==null||l.forEach(m=>{var p,g;(g=(p=m(e))==null?void 0:p.tearDown)==null||g.call(p)}),(i=a.plugins)==null||i.forEach(m=>{var p,g;(g=(p=m(e))==null?void 0:p.tearDown)==null||g.call(p)}),(d=a.plugins)==null||d.forEach(m=>{var p,g;(g=(p=m(e))==null?void 0:p.setup)==null||g.call(p)}),yt(e,r),de(e,!0)}function Dt(e){const t=E.get(e);t&&t.abortControllers.mainParent&&t.abortControllers.mainParent.abort()}function yt(e,t){t.abortControllers.mainParent=Ne(e,{dragover:nn(mt(t.config.handleDragoverParent,10)),touchOverParent:t.config.handleTouchOverParent})}function Nt(e){const t=e[0].target;t instanceof HTMLElement&&de(t)}function de(e,t){const n=E.get(e);if(!n)return;const a=[],r=n.config;for(let i=0;i<e.children.length;i++){const d=e.children[i];if(!Y(d))continue;const m=$.get(d);(t||!m)&&r.tearDownNode({node:d,parent:e,nodeData:m,parentData:n}),!r.disabled&&(!r.draggable||r.draggable&&r.draggable(d))&&a.push(d)}if(a.length!==n.getValues(e).length&&!r.disabled){console.warn("The number of enabled nodes does not match the number of values.");return}const o=n.getValues(e),l=[];for(let i=0;i<a.length;i++){const d=a[i],m=$.get(d),p=Object.assign(m??{privateClasses:[],abortControllers:{}},{value:o[i],index:i});if(s&&p.value===s.draggedNode.data.value&&(s.draggedNode.data=p,s.draggedNode.el=d),s&&s.draggedNodes.map(T=>T.data.value).includes(p.value)){const T=s.draggedNodes.find(v=>v.data.value===p.value);T&&(T.el=d)}l.push({el:d,data:p});const g={node:d,parent:e,parentData:n,nodeData:p};(t||!m)&&r.setupNode(g),Ce(g)}E.set(e,{...n,enabledNodes:l}),r.remapFinished(n)}function wt(){s&&(s.remapJustFinished=!0,s.affectedNodes=[])}function xt(e){e.e instanceof DragEvent&&Vt({e:e.e,targetData:e.targetData})}function kt(e,t,n){U([e],t),setTimeout(()=>{te([e],t),U([e],n)})}function Tt(e){const t=ke(Te(e));return e.e.stopPropagation(),e.e.dataTransfer&&(e.e.dataTransfer.dropEffect="move",e.e.dataTransfer.effectAllowed="move",e.e.dataTransfer.setDragImage(e.targetData.node.el,e.e.offsetX,e.e.offsetY)),t}function Ve(e){if(!(e.e instanceof DragEvent)&&!(e.e instanceof TouchEvent))return!1;const t=e.targetData.parent.data.config;if(!t.dragHandle)return!0;const n=e.targetData.node.el.querySelectorAll(t.dragHandle);if(!n)return!1;const a=R(e.e),r=t.root.elementFromPoint(a.x,a.y);if(!r)return!1;for(const o of Array.from(n))if(r===o||o.contains(r))return!0;return!1}function It(e){if(!Ve(e))return;const t=St(e);Ot(e,t),zt(e,t)}function Vt(e){if(!Ve(e)){e.e.preventDefault();return}const t=e.targetData.parent.data.config,n=Tt(e),a=e.targetData.node.el.style.zIndex;n.originalZIndex=a,e.targetData.node.el.style.zIndex="9999",kt(n.draggedNode.el,t.draggingClass,t.dropZoneClass)}function Ct(e){s&&(e.detail.targetData.parent.el===s.lastParent.el?Be(e.detail,s):ae(e.detail,s))}function Pt(e){var n;const t=e.parentData.config;e.node.draggable=!0,e.nodeData.abortControllers.mainNode=Ne(e.node,{dragstart:L(t.handleDragstart),dragover:L(t.handleDragoverNode),dragenter:L(t.handleDragenterNode),dragleave:L(t.handleDragleaveNode),dragend:L(t.handleEnd),touchstart:L(t.handleTouchstart),touchmove:L(t.handleTouchmove),touchend:L(t.handleEnd),touchOverNode:t.handleTouchOverNode}),t.reapplyDragClasses(e.node,e.parentData),(n=e.parentData.config.plugins)==null||n.forEach(a=>{var r,o;(o=(r=a(e.parent))==null?void 0:r.setupNode)==null||o.call(r,e)})}function Ce(e){var t;$.set(e.node,e.nodeData),(t=e.parentData.config.plugins)==null||t.forEach(n=>{var a,r;(r=(a=n(e.parent))==null?void 0:a.setupNodeRemap)==null||r.call(a,e)})}function Et(e,t){if(!s)return;const n="touchedNode"in s?t.config.touchDropZoneClass:t.config.dropZoneClass;s.draggedNode.el===e&&U([e],n,!0)}function _t(e){var t;(t=e.parentData.config.plugins)==null||t.forEach(n=>{var a,r;(r=(a=n(e.parent))==null?void 0:a.tearDownNodeRemap)==null||r.call(a,e)})}function Bt(e){var t,n,a,r,o;(t=e.parentData.config.plugins)==null||t.forEach(l=>{var i,d;(d=(i=l(e.parent))==null?void 0:i.tearDownNode)==null||d.call(i,e)}),e.node.draggable=!1,(a=(n=e.nodeData)==null?void 0:n.abortControllers)!=null&&a.mainNode&&((o=(r=e.nodeData)==null?void 0:r.abortControllers)==null||o.mainNode.abort())}function Pe(e){s&&(At(e,s),gt())}function At(e,t){var o,l,i,d;document.removeEventListener("contextmenu",Ee),"longTouchTimeout"in t&&t.longTouchTimeout&&clearTimeout(t.longTouchTimeout);const n=(o=E.get(t.initialParent.el))==null?void 0:o.config,r="touchedNode"in t?n==null?void 0:n.touchDropZoneClass:n==null?void 0:n.dropZoneClass;t.originalZIndex!==void 0&&(t.draggedNode.el.style.zIndex=t.originalZIndex),U(t.draggedNodes.map(m=>m.el),r,!0),te(t.draggedNodes.map(m=>m.el),r),n!=null&&n.longTouchClass&&te(t.draggedNodes.map(m=>m.el),(i=(l=t.initialParent.data)==null?void 0:l.config)==null?void 0:i.longTouchClass),"touchedNode"in t&&((d=t.touchedNode)==null||d.remove())}function $t(e){e.e instanceof TouchEvent&&It({e:e.e,targetData:e.targetData})}function St(e){e.e.stopPropagation();const t=e.targetData.node.el.cloneNode(!0),n=e.targetData.node.el.getBoundingClientRect();return ht(ke(Te(e)),{coordinates:{x:e.e.touches[0].clientX,y:e.e.touches[0].clientY},scrollParent:ye(e.targetData.node.el),touchStartLeft:e.e.touches[0].clientX-n.left,touchStartTop:e.e.touches[0].clientY-n.top,touchedNode:t,touchMoving:!1})}function Ee(e){e.preventDefault()}function Ot(e,t){t.touchedNodeDisplay=t.touchedNode.style.display;const n=e.targetData.node.el.getBoundingClientRect();t.touchedNode.style.cssText=`
            width: ${n.width}px;
            position: fixed;
            pointer-events: none;
            top: -9999px;
            z-index: 999999;
            display: none;
          `,document.body.append(t.touchedNode),we(e.targetData.node.el,t.touchedNode),t.touchedNode.style.display="none",document.addEventListener("contextmenu",Ee)}function zt(e,t){const n=e.targetData.parent.data.config;n.longTouch&&(t.longTouchTimeout=setTimeout(()=>{t&&(t.longTouch=!0,n.longTouchClass&&e.e.cancelable&&U(t.draggedNodes.map(a=>a.el),n.longTouchClass),e.e.preventDefault())},n.longTouchTimeout||200))}function Lt(e){!s||!("touchedNode"in s)||Wt(e,s)}function Ft(e,t){t.longTouchClass&&te(e.draggedNodes.map(n=>n.el),t==null?void 0:t.longTouchClass),t.touchDraggingClass&&U([e.touchedNode],t.touchDraggingClass),t.touchDropZoneClass&&U(e.draggedNodes.map(n=>n.el),t.touchDropZoneClass)}function Kt(e){if(!e||!e.scrollParent||e.scrollParent===document.documentElement&&!("touchedNode"in e))return;const{x:t,y:n,width:a,height:r}=e.scrollParent.getBoundingClientRect(),{x:o,y:l,scrollOutside:i}=e.lastParent.data.config.scrollBehavior;return{state:e,xThresh:o,yThresh:l,scrollOutside:i,scrollParent:e.scrollParent,x:t,y:n,width:a,height:r}}function Mt(e){const t=Kt(s);if(t)switch(e){case"down":return Ht(t.state,t);case"up":return qt(t.state,t);case"right":return Ut(t.state,t);case"left":return Rt(t.state,t)}}function Ut(e,t){const n=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&n<0)&&n<(1-t.xThresh)*t.scrollParent.clientWidth&&!(t.scrollParent.scrollLeft+t.scrollParent.clientWidth>=t.scrollParent.scrollWidth))return e}function Rt(e,t){const n=t.scrollParent.clientWidth+t.x-e.coordinates.x;if(!(!t.scrollOutside&&n>t.scrollParent.clientWidth)&&n>t.xThresh*t.scrollParent.clientWidth&&t.scrollParent.scrollLeft!==0)return e}function qt(e,t){const n=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&n>t.scrollParent.clientHeight)&&n>t.yThresh*t.scrollParent.clientHeight&&t.scrollParent.scrollTop!==0)return e}function Ht(e,t){const n=t.scrollParent.clientHeight+t.y-e.coordinates.y;if(!(!t.scrollOutside&&n<0)&&n<(1-t.yThresh)*t.scrollParent.clientHeight&&!(t.scrollParent.scrollTop+t.scrollParent.clientHeight>=t.scrollParent.scrollHeight))return e}function Zt(e,t){t.touchMoving=!0,t.touchedNode.style.display=t.touchedNodeDisplay||"";const{x:n,y:a}=R(e.e);t.coordinates.y=a,t.coordinates.x=n;const r=t.touchStartLeft??0,o=t.touchStartTop??0;t.touchedNode.style.left=`${n-r}px`,t.touchedNode.style.top=`${a-o}px`,Ft(t,e.targetData.parent.data.config)}function Wt(e,t){if(e.targetData.parent.data.config.longTouch&&!t.longTouch){clearTimeout(t.longTouchTimeout);return}e.e.cancelable&&e.e.preventDefault(),Zt(e,t),ne();const a=pt(e);if(!a)return;const r={e:e.e,targetData:a};"node"in a?a.node.el.dispatchEvent(new CustomEvent("touchOverNode",{detail:r})):a.parent.el.dispatchEvent(new CustomEvent("touchOverParent",{detail:r}))}function ne(){for(const e of Object.keys(fe)){const[t,n]=fe[e];_e(e,t,n)}}function _e(e,t,n){const a=Mt(e);a&&(a.scrollParent.scrollBy(t,n),setTimeout(()=>{_e(e,t,n)},"touchedNode"in a?10:100))}function Xt(e){if(!s)return;const{x:t,y:n}=R(e.e);s.coordinates.y=n,s.coordinates.x=t,ne(),en(e,s)}function Jt(e){if(!s)return;const{x:t,y:n}=R(e.e);s.coordinates.y=n,s.coordinates.x=t,ne(),ae(e,s)}function Yt(e){s&&ae(e.detail,s)}function jt(e,t){if(e.targetData.parent.el===t.lastParent.el)return!1;const n=e.targetData.parent.data.config;if(n.dropZone===!1)return!1;const a=t.initialParent.data.config;return n.accepts?n.accepts(e.targetData.parent,t.initialParent,t.lastParent,t):!(!n.group||n.group!==a.group)}function Gt(e,t){e.e.preventDefault()}function Qt(e,t){e.e.preventDefault()}function en(e,t){var n;e.e.preventDefault(),e.e.stopPropagation(),e.targetData.parent.el===((n=t.lastParent)==null?void 0:n.el)?Be(e,t):ae(e,t)}function tn(e,t,n,a){var p;if(t.affectedNodes.map(g=>g.data.value).includes(e.targetData.node.data.value))return!1;if(t.remapJustFinished)return t.remapJustFinished=!1,(e.targetData.node.data.value===t.lastTargetValue||t.draggedNodes.map(g=>g.el).includes(e.targetData.node.el))&&(t.lastTargetValue=e.targetData.node.data.value),!1;if(t.draggedNodes.map(g=>g.el).includes(e.targetData.node.el))return t.lastTargetValue=void 0,!1;if(e.targetData.node.data.value===t.lastTargetValue||t.preventEnter||e.targetData.parent.el!==((p=t.lastParent)==null?void 0:p.el)||e.targetData.parent.data.config.sortable===!1)return!1;const r=e.targetData.node.el.getBoundingClientRect(),o=t.draggedNode.el.getBoundingClientRect(),l=r.y-o.y,i=r.x-o.x;let d;Math.abs(l)>Math.abs(i)?d=l>0?"above":"below":d=i>0?"left":"right";const m=t.lastParent.data.config.threshold;switch(d){case"left":if(n>r.x+r.width*m.horizontal)return t.incomingDirection="left",!0;break;case"right":if(n<r.x+r.width*(1-m.horizontal))return t.incomingDirection="right",!0;break;case"above":if(a>r.y+r.height*m.vertical)return t.incomingDirection="above",!0;break;case"below":if(a<r.y+r.height*(1-m.vertical))return t.incomingDirection="below",!0;break}return!1}function Be(e,t){const{x:n,y:a}=R(e.e);if(!tn(e,t,n,a))return;const r=t.draggedNode.data.index>e.targetData.node.data.index?[e.targetData.node.data.index,t.draggedNode.data.index]:[t.draggedNode.data.index,e.targetData.node.data.index];t.targetIndex=e.targetData.node.data.index,t.affectedNodes=e.targetData.parent.data.enabledNodes.filter(o=>r[0]<=o.data.index&&o.data.index<=r[1]&&o.el!==t.draggedNode.el),e.targetData.parent.data.config.performSort(t,e)}function L(e){function t(n){var l;const a=$.get(n),r=n.parentNode||((l=s==null?void 0:s.lastParent)==null?void 0:l.el);if(!a)return;const o=E.get(r);if(o)return{node:{el:n,data:a},parent:{el:r,data:o}}}return n=>{const a=t(n.currentTarget);if(a)return e({e:n,targetData:a})}}function Ae(e,t){const n=Ie(e),a=le(e.lastParent.el,e.lastParent.data).filter(i=>!n.includes(i)),r=le(t.targetData.parent.el,t.targetData.parent.data),o=e.initialParent.el===t.targetData.parent.el&&t.targetData.parent.data.config.sortable===!1;let l;"node"in t.targetData?(o?l=e.initialIndex:t.targetData.parent.data.config.sortable===!1?l=t.targetData.parent.data.enabledNodes.length:l=t.targetData.node.data.index,r.splice(l,0,...n)):(l=o?e.initialIndex:t.targetData.parent.data.enabledNodes.length,r.splice(l,0,...n)),ie(e.lastParent.el,e.lastParent.data,a),ie(t.targetData.parent.el,t.targetData.parent.data,r)}function ae(e,t){jt(e,t)&&(e.targetData.parent.data.config.performTransfer(t,e),t.lastParent=e.targetData.parent,t.transferred=!0)}function nn(e){function t(n){const a=E.get(n);if(a)return{parent:{el:n,data:a}}}return n=>{const a=t(n.currentTarget);if(a)return e({e:n,targetData:a})}}function me(e){if(e instanceof HTMLElement)return e;if(e.value instanceof HTMLElement)return e.value;if("$el"in e&&e.$el instanceof HTMLElement)return e.$el}function an(e,t){Array.isArray(e)||(e=[e]);for(const n of e){const a=me(n);if(a)return t(a);const r=Z(n,o=>{if(!o)return;const l=me(o);l?t(l):console.warn("Invalid parent element",o),r()})}}var ce=new WeakMap;function rn(e){const t=ce.get(e);return t?t.value:(console.warn("No values found for parent element"),[])}function on(e,t){const n=ce.get(t);n&&(n.value=e)}function $e(e){De&&(Array.isArray(e)||(e=[e]),e.forEach(t=>{const{parent:n,values:a,...r}=t;an(n,ln(r,a))}))}function ln(e,t){return n=>{ce.set(n,t),vt({parent:n,getValues:rn,setValues:on,config:{...e,dropZones:[]}})}}const sn=N("p",{class:"mb-0 text-sm text-medium-emphasis"}," Assigned ",-1),dn=N("p",{class:"text-body-2 text-high-emphasis mb-1",style:{"line-height":"15px"}}," COMMENT ",-1),cn={class:"border rounded px-3 py-2"},un={key:0,class:"d-flex justify-end flex-wrap gap-x-2"},fn={__name:"KanbanBoardEditDrawer",props:{kanbanItem:{type:null,required:!1,default:()=>({item:{title:"",dueDate:"2022-01-01T00:00:00Z",labels:[],members:[],id:0,attachments:0,commentsCount:0,image:"",comments:""},boardId:0,boardName:""})},isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","update:kanbanItem","deleteKanbanItem"],setup(e,{emit:t}){const n=e,a=t,r=w(),o=["UX","Image","Code Review","Dashboard","App","Charts & Maps"],l=w(JSON.parse(JSON.stringify(n.kanbanItem.item))),i=k=>{var D;a("update:isDrawerOpen",k),k||(D=r.value)==null||D.reset()};Z(()=>n.kanbanItem,()=>{l.value=JSON.parse(JSON.stringify(n.kanbanItem.item))},{deep:!0});const d=()=>{var k;(k=r.value)==null||k.validate().then(async D=>{var S;D.valid&&(a("update:kanbanItem",{item:l.value,boardId:n.kanbanItem.boardId,boardName:n.kanbanItem.boardName}),a("update:isDrawerOpen",!1),await ze(),(S=r.value)==null||S.reset())})},m=()=>{a("deleteKanbanItem",{item:l.value,boardId:n.kanbanItem.boardId,boardName:n.kanbanItem.boardName}),a("update:isDrawerOpen",!1)},p={UX:"success",Image:"warning","Code Review":"error",Dashboard:"info",App:"secondary","Charts & Maps":"primary"},g=qe({content:"",extensions:[He,Je.configure({types:["heading","paragraph"]}),Ze.configure({placeholder:"Write a Comment..."}),We]}),T=w({altFormat:"j M, Y",altInput:!0,dateFormat:"Y-m-d"}),v=[{img:je,name:"John Doe"},{img:Ge,name:"Jane Smith"},{img:Qe,name:"Robert Johnson"},{img:et,name:"Lucy Brown"},{img:tt,name:"Mike White"},{img:nt,name:"Anna Black"}],I=w();return(k,D)=>{const S=Ue,K=Re,H=Oe("IconBtn");return y(),B(lt,{location:"end",width:370,temporary:"",border:"0","model-value":n.isDrawerOpen,"onUpdate:modelValue":i},{default:b(()=>[c(S,{title:"Edit Task",onCancel:D[0]||(D[0]=u=>k.$emit("update:isDrawerOpen",!1))}),c(at),c(f(Ye),{options:{wheelPropagation:!1},style:{"block-size":"calc(100vh - 4rem)"}},{default:b(()=>[f(l)?(y(),B(f(ee),{key:0,ref_key:"refEditTaskForm",ref:r,onSubmit:W(d,["prevent"])},{default:b(()=>[c(pe,{class:"kanban-editor-drawer"},{default:b(()=>[c(rt,null,{default:b(()=>[c(M,{cols:"12"},{default:b(()=>[c(se,{modelValue:f(l).title,"onUpdate:modelValue":D[1]||(D[1]=u=>f(l).title=u),label:"Title",rules:["requiredValidator"in k?k.requiredValidator:f(Q)]},null,8,["modelValue","rules"])]),_:1}),c(M,{cols:"12"},{default:b(()=>[c(K,{modelValue:f(l).dueDate,"onUpdate:modelValue":D[2]||(D[2]=u=>f(l).dueDate=u),label:"Due date",config:f(T)},null,8,["modelValue","config"])]),_:1}),c(M,{cols:"12"},{default:b(()=>[c(ue,{modelValue:f(l).labels,"onUpdate:modelValue":D[3]||(D[3]=u=>f(l).labels=u),items:o,label:"Label",multiple:"",eager:""},{chip:b(({item:u})=>[c(ge,{color:p[u.raw]},{default:b(()=>[A(F(u.raw),1)]),_:2},1032,["color"])]),_:1},8,["modelValue"])]),_:1}),c(M,{cols:"12"},{default:b(()=>[sn,N("div",null,[c(ue,{modelValue:f(l).members,"onUpdate:modelValue":D[4]||(D[4]=u=>f(l).members=u),density:"compact",items:v,"item-title":"name","item-value":"name",multiple:"","return-object":"",variant:"plain","menu-props":{offset:10},class:"assignee-select"},{selection:b(({item:u})=>[c(he,{size:"26"},{default:b(()=>[c(re,{src:u.raw.img},null,8,["src"]),c(be,{activator:"parent"},{default:b(()=>[A(F(u.raw.name),1)]),_:2},1024)]),_:2},1024)]),"prepend-inner":b(()=>[c(H,{size:"26",variant:"tonal",class:"mt-1"},{default:b(()=>[c(V,{size:"20",icon:"ri-add-line"})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),c(M,{cols:"12"},{default:b(()=>[c(ot,{modelValue:f(I),"onUpdate:modelValue":D[5]||(D[5]=u=>X(I)?I.value=u:null),label:"Choose file",multiple:""},null,8,["modelValue"])]),_:1}),c(M,{cols:"12"},{default:b(()=>[dn,N("div",cn,[c(f(Xe),{editor:f(g)},null,8,["editor"]),f(g)?(y(),C("div",un,[c(V,{icon:"ri-bold",color:f(g).isActive("bold")?"primary":"secondary",size:"20",onClick:D[6]||(D[6]=u=>f(g).chain().focus().toggleBold().run())},null,8,["color"]),c(V,{color:f(g).isActive("underline")?"primary":"secondary",icon:"ri-underline",size:"20",onClick:D[7]||(D[7]=u=>f(g).commands.toggleUnderline())},null,8,["color"]),c(V,{color:f(g).isActive("italic")?"primary":"secondary",icon:"ri-italic",size:"20",onClick:D[8]||(D[8]=u=>f(g).chain().focus().toggleItalic().run())},null,8,["color"]),c(V,{color:f(g).isActive({textAlign:"left"})?"primary":"secondary",icon:"ri-align-left",size:"20",onClick:D[9]||(D[9]=u=>f(g).chain().focus().setTextAlign("left").run())},null,8,["color"]),c(V,{color:f(g).isActive({textAlign:"center"})?"primary":"secondary",icon:"ri-align-center",size:"20",onClick:D[10]||(D[10]=u=>f(g).chain().focus().setTextAlign("center").run())},null,8,["color"]),c(V,{color:f(g).isActive({textAlign:"right"})?"primary":"secondary",icon:"ri-align-right",size:"20",onClick:D[11]||(D[11]=u=>f(g).chain().focus().setTextAlign("right").run())},null,8,["color"])])):P("",!0)])]),_:1}),c(M,{cols:"12"},{default:b(()=>[c(q,{type:"submit",class:"me-4"},{default:b(()=>[A(" Update ")]),_:1}),c(q,{color:"error",variant:"tonal",onClick:m},{default:b(()=>[A(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)):P("",!0)]),_:1})]),_:1},8,["model-value"])}}},mn={class:"d-flex align-start gap-2"},pn={key:0,class:"d-flex flex-wrap gap-2"},gn={class:"text-base text-high-emphasis mb-0"},hn={class:"task-footer d-flex align-center flex-wrap justify-space-between"},bn={key:0,class:"d-flex align-center gap-4"},vn={key:0},Dn={class:"text-body-1 d-inline-block"},yn={key:1},Nn={class:"text-body-1 d-inline-block"},wn={key:1,class:"v-avatar-group"},xn={__name:"KanbanCard",props:{item:{type:null,required:!0},boardId:{type:Number,required:!0},boardName:{type:String,required:!0}},emits:["deleteKanbanItem"],setup(e,{emit:t}){const n=e,a=t,r={UX:"success",Image:"warning","Code Review":"error",Dashboard:"info",App:"secondary","Charts & Maps":"primary"},o=[{title:"Copy Task link",href:"#"},{title:"Duplicate Task",href:"#"},{title:"Delete",onClick:()=>{a("deleteKanbanItem",{item:n.item,boardId:n.boardId,boardName:n.boardName})}}];return(l,i)=>e.item?(y(),B(ut,{key:0,ripple:!1,link:!1,class:"kanban-card position-relative"},{default:b(()=>[c(pe,{class:"d-flex flex-column gap-2"},{default:b(()=>[N("div",mn,[e.item.labels&&e.item.labels.length?(y(),C("div",pn,[(y(!0),C(J,null,G(e.item.labels,d=>(y(),B(ge,{key:d,size:"small",color:r[d]},{default:b(()=>[A(F(d),1)]),_:2},1032,["color"]))),128))])):P("",!0),c(st),c(dt,null,{activator:b(({props:d,isActive:m})=>[c(V,Fe(d,{icon:"ri-more-2-line",class:"position-absolute more-options",style:[{"inset-block-start":"16px","inset-inline-end":"10px"},m?"opacity: 1":""],size:"20",onClick:i[0]||(i[0]=W(()=>{},["stop"]))}),null,16,["style"])]),default:b(()=>[c(ct,{items:o,"item-props":""})]),_:1})]),e.item.image&&e.item.image.length?(y(),B(re,{key:0,src:e.item.image,class:"rounded"},null,8,["src"])):P("",!0),N("p",gn,F(e.item.title),1),N("div",hn,[e.item.attachments||e.item.commentsCount?(y(),C("div",bn,[e.item.attachments?(y(),C("div",vn,[c(V,{size:"20",icon:"ri-attachment-2",class:"me-1"}),N("span",Dn,F(e.item.attachments),1)])):P("",!0),e.item.commentsCount?(y(),C("div",yn,[c(V,{size:"20",icon:"ri-wechat-line",class:"me-1"}),N("span",Nn,F(e.item.commentsCount),1)])):P("",!0)])):P("",!0),e.item.members&&e.item.members.length?(y(),C("div",wn,[(y(!0),C(J,null,G(e.item.members,d=>(y(),B(he,{key:d.name,size:"30"},{default:b(()=>[c(re,{src:d.img},null,8,["src"]),c(be,{activator:"parent"},{default:b(()=>[A(F(d.name),1)]),_:2},1024)]),_:2},1024))),128))])):P("",!0)])]),_:1})]),_:1})):P("",!0)}},kn=Le(xn,[["__scopeId","data-v-dee1e0d1"]]),Tn={class:"kanban-board"},In={class:"kanban-board-header pb-4"},Vn={class:"d-flex align-center gap-1 h-100"},Cn={key:1,class:"d-flex align-center justify-space-between"},Pn={class:"text-lg font-weight-medium text-truncate"},En={class:"d-flex align-center"},_n={class:"add-new-form"},Bn={class:"mb-4"},An={class:"d-flex gap-4 flex-wrap"},$n={__name:"KanbanItems",props:{kanbanIds:{type:Array,required:!0},groupName:{type:String,required:!0},boardName:{type:String,required:!0},boardId:{type:Number,required:!0},kanbanData:{type:null,required:!0}},emits:["renameBoard","deleteBoard","addNewItem","editItem","updateItemsState","deleteItem"],setup(e,{emit:t}){const n=e,a=t,r=w(),o=w(n.boardName),l=w(n.kanbanIds),i=w(!1),d=w(!1),m=w(),p=w(""),g=w(),T=[{title:"Rename",prependIcon:"ri-pencil-line",onClick:()=>{d.value=!0}},{title:"Delete",prependIcon:"ri-delete-bin-line",onClick:()=>a("deleteBoard",n.boardId)}],v=()=>{var u;(u=g.value)==null||u.validate().then(h=>{h.valid&&(a("renameBoard",{oldName:n.boardName,newName:o.value,boardId:n.boardId}),d.value=!1)})},I=()=>{var u;(u=m.value)==null||u.validate().then(h=>{h.valid&&(a("addNewItem",{itemTitle:p.value,boardName:n.boardName,boardId:n.boardId}),i.value=!1,p.value="")})};$e({parent:r,values:l,group:n.groupName,draggable:u=>u.classList.contains("kanban-card"),plugins:[xe()],performTransfer:(u,h)=>{Ae(u,h),a("updateItemsState",{boardId:n.boardId,ids:l.value})},handleEnd:u=>{Pe(u),a("updateItemsState",{boardId:n.boardId,ids:l.value})}}),Z(()=>n,()=>{l.value=n.kanbanIds},{immediate:!0,deep:!0});const k=u=>n.kanbanData.items.find(h=>h.id===u),D=u=>{a("deleteItem",u)},S=()=>{var u;i.value=!1,(u=m.value)==null||u.reset()};oe(m,S),oe(g,()=>{d.value=!1});const K=()=>{d.value=!1,o.value=n.boardName},H=u=>{u.key==="Enter"&&!u.shiftKey&&I()};return(u,h)=>{const _=it;return y(),C("div",Tn,[N("div",In,[f(d)?(y(),B(f(ee),{key:0,ref_key:"refKanbanBoardTitle",ref:g,onSubmit:W(v,["prevent"])},{default:b(()=>[c(se,{modelValue:f(o),"onUpdate:modelValue":h[0]||(h[0]=x=>X(o)?o.value=x:null),density:"compact",autofocus:"",variant:"underlined",rules:["requiredValidator"in u?u.requiredValidator:f(Q)],"hide-details":"",class:"border-0",onKeydown:j(K,["esc"])},{"append-inner":b(()=>[N("div",Vn,[c(V,{size:"small",variant:"text",color:"success",icon:"ri-check-line",class:"cursor-pointer",onClick:v}),c(V,{size:"small",variant:"text",color:"error",icon:"ri-close-line",class:"cursor-pointer",onClick:K})])]),_:1},8,["modelValue","rules"])]),_:1},512)):(y(),C("div",Cn,[N("h4",Pn,F(e.boardName),1),N("div",En,[c(V,{class:"drag-handler",size:"20",icon:"ri-drag-move-fill"}),c(_,{size:"x-small","icon-size":"20","menu-list":T,"item-props":""})])]))]),f(l)?(y(),C("div",{key:0,ref_key:"refKanbanBoard",ref:r,class:Ke(["kanban-board-drop-zone rounded d-flex flex-column gap-4",f(l).length?"mb-4":""])},[(y(!0),C(J,null,G(f(l),x=>(y(),B(kn,{key:x,item:k(x),"board-id":n.boardId,"board-name":n.boardName,onDeleteKanbanItem:D,onClick:Kn=>a("editItem",{item:k(x),boardId:n.boardId,boardName:n.boardName})},null,8,["item","board-id","board-name","onClick"]))),128)),N("div",_n,[N("h6",{class:"text-base font-weight-regular cursor-pointer ms-4",onClick:h[1]||(h[1]=x=>i.value=!f(i))},[c(V,{size:"15",icon:"ri-add-line"}),A(" Add New Item ")]),f(i)?(y(),B(f(ee),{key:0,ref_key:"refForm",ref:m,class:"mt-4","validate-on":"submit",onSubmit:W(I,["prevent"])},{default:b(()=>[N("div",Bn,[c(ft,{modelValue:f(p),"onUpdate:modelValue":h[2]||(h[2]=x=>X(p)?p.value=x:null),density:"compact",rules:["requiredValidator"in u?u.requiredValidator:f(Q)],placeholder:"Add Content",autofocus:"",rows:"2",onKeydown:[j(H,["enter"]),j(S,["esc"])]},null,8,["modelValue","rules"])]),N("div",An,[c(q,{size:"small",type:"submit"},{default:b(()=>[A(" Add ")]),_:1}),c(q,{size:"small",variant:"outlined",color:"secondary",onClick:S},{default:b(()=>[A(" Cancel ")]),_:1})])]),_:1},512)):P("",!0)])],2)):P("",!0)])}}},Sn={class:"kanban-main-wrapper d-flex gap-4 h-100"},On={class:"add-new-form text-no-wrap",style:{"inline-size":"10rem"}},zn={class:"mb-4"},Ln={class:"d-flex gap-3"},Fn={__name:"KanbanBoard",props:{kanbanData:{type:null,required:!0},groupName:{type:String,required:!1,default:"kanban"}},emits:["addNewBoard","renameBoard","deleteBoard","addNewItem","editItem","deleteItem","updateItemsState","updateBoardState"],setup(e,{emit:t}){const n=e,a=t,r=w(),o=w(n.kanbanData.boards),l=w(!1),i=w(!1),d=w(),m=w(""),p=w(),g=()=>{var h;(h=d.value)==null||h.validate().then(_=>{_.valid&&(a("addNewBoard",m.value),i.value=!1,m.value="")})},T=h=>{a("deleteBoard",h)},v=h=>{a("renameBoard",h)},I=h=>{a("addNewItem",h)},k=h=>{h&&(p.value=h,l.value=!0)},D=h=>{a("updateItemsState",h)};$e({parent:r,values:o,dragHandle:".drag-handler",plugins:[xe()]}),Z(()=>n,()=>{o.value=n.kanbanData.boards,de(r.value)},{deep:!0});const S=h=>{a("editItem",h)},K=h=>{a("deleteItem",h)};Z(o,()=>{const h=o.value.map(_=>_.id);a("updateBoardState",h)},{deep:!0});const H=()=>n.kanbanData.boards.some(h=>m.value&&h.title.toLowerCase()===m.value.toLowerCase())?"Board title already exists":!0,u=()=>{var h;i.value=!1,(h=d.value)==null||h.reset()};return oe(d,u),(h,_)=>(y(),C(J,null,[N("div",Sn,[N("div",{ref_key:"kanbanWrapper",ref:r,class:"d-flex ga-4"},[(y(!0),C(J,null,G(f(o),x=>(y(),B($n,{key:x.id,"group-name":e.groupName,"kanban-ids":x.itemsIds,"board-name":x.title,"board-id":x.id,"kanban-items":e.kanbanData.items,"kanban-data":e.kanbanData,onDeleteBoard:T,onRenameBoard:v,onAddNewItem:I,onEditItem:k,onUpdateItemsState:D,onDeleteItem:K},null,8,["group-name","kanban-ids","board-name","board-id","kanban-items","kanban-data"]))),128))],512),N("div",On,[N("h6",{class:"text-lg font-weight-medium cursor-pointer",onClick:_[0]||(_[0]=x=>i.value=!f(i))},[c(V,{size:"18",icon:"ri-add-line"}),A(" Add New ")]),f(i)?(y(),B(f(ee),{key:0,ref_key:"refAddNewBoard",ref:d,class:"mt-4","validate-on":"submit",onSubmit:W(g,["prevent"])},{default:b(()=>[N("div",zn,[c(se,{modelValue:f(m),"onUpdate:modelValue":_[1]||(_[1]=x=>X(m)?m.value=x:null),density:"compact",rules:["requiredValidator"in h?h.requiredValidator:f(Q),H],autofocus:"",placeholder:"Add Board Title",onKeydown:j(u,["esc"])},null,8,["modelValue","rules"])]),N("div",Ln,[c(q,{size:"small",type:"submit"},{default:b(()=>[A(" Add ")]),_:1}),c(q,{size:"small",variant:"tonal",color:"secondary",type:"reset",onClick:u},{default:b(()=>[A(" Cancel ")]),_:1})])]),_:1},512)):P("",!0)])]),c(fn,{"is-drawer-open":f(l),"onUpdate:isDrawerOpen":_[2]||(_[2]=x=>X(l)?l.value=x:null),"kanban-item":f(p),"onUpdate:kanbanItem":S,onDeleteKanbanItem:K},null,8,["is-drawer-open","kanban-item"])],64))}},za={__name:"index",async setup(e){let t,n;const{data:a,execute:r}=([t,n]=Me(()=>Se("/apps/kanban")),t=await t,n(),t),o=async v=>{await z("/apps/kanban/board/add",{method:"POST",body:{title:v}}),r()},l=async v=>{await z(`/apps/kanban/board/${v}`,{method:"DELETE"}),r()},i=async v=>{await z("/apps/kanban/board/rename",{method:"PUT",body:v}),r()},d=async v=>{await z("/apps/kanban/item/add",{method:"POST",body:v}),r()},m=async v=>{await z("/apps/kanban/item/update",{method:"PUT",body:v}),r()},p=async v=>{v.item&&v.item.id&&(await z(`/apps/kanban/item/${v.item.id}`,{method:"DELETE",body:v}),r())},g=async v=>{await z("/apps/kanban/item/state-update",{method:"PUT",body:v})},T=async v=>{await z("/apps/kanban/board/state-update",{method:"PUT",body:v})};return(v,I)=>f(a)?(y(),B(Fn,{key:0,"kanban-data":f(a),onAddNewBoard:o,onDeleteBoard:l,onRenameBoard:i,onAddNewItem:d,onEditItem:m,onDeleteItem:p,onUpdateItemsState:g,onUpdateBoardState:T},null,8,["kanban-data"])):P("",!0)}};export{za as default};
