{"title":"前端实现画中画","uid":"0818b661b1c32ba6a0c1f1f3dba65b2c","slug":"前端实现画中画","date":"2024-12-20T06:05:06.787Z","updated":"2024-12-20T06:12:39.241Z","comments":true,"path":"api/articles/前端实现画中画.json","keywords":null,"cover":null,"content":"<h2 id=\"Document-Picture-in-Picture-介绍\"><a href=\"#Document-Picture-in-Picture-介绍\" class=\"headerlink\" title=\"Document Picture-in-Picture 介绍\"></a>Document Picture-in-Picture 介绍</h2><p><strong>文档画中画</strong> (Document Picture-in-Picture, 本文简称 PiP)。</p>\n<p>你可能已经在视频平台（如<code>腾讯视频</code>、<code>哔哩哔哩</code>等网页）见过这种效果：视频播放时，可以点击画中画后。无论你切换页面，它都始终显示在屏幕的最上层，</p>\n<h3 id=\"HTML-基本代码结构\"><a href=\"#HTML-基本代码结构\" class=\"headerlink\" title=\"HTML 基本代码结构\"></a>HTML 基本代码结构</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document Picture-in-Picture API 示例<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-id\">#pipContent</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">width</span>: <span class=\"number\">600px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">background</span>: pink;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"attribute\">font-size</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">      &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;container&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;pipContent&quot;</span>&gt;</span>这是一个将要放入画中画的 div 元素！<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;clickBtn&quot;</span>&gt;</span>切换画中画<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">// 在这里写你的 JavaScript 代码</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"请求-PiP-窗口\"><a href=\"#请求-PiP-窗口\" class=\"headerlink\" title=\"请求 PiP 窗口\"></a>请求 PiP 窗口</h3><p><code>PiP</code> 的核心方法是 <code>window.documentPictureInPicture.requestWindow</code>。它是一个 <code>异步方法</code>，返回一个新创建的 <code>window</code> 对象。<br><code>PIP 窗口</code>可以将其看作一个新的网页，但它始终悬浮在屏幕上方。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">document</span></span><br><span class=\"line\">  .<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;clickBtn&quot;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&quot;click&quot;</span>, <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 获取将要放入 PiP 窗口的 DOM 元素</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> pipContent = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;pipContent&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 请求创建一个 PiP 窗口</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> pipWindow = <span class=\"keyword\">await</span> <span class=\"variable language_\">window</span>.<span class=\"property\">documentPictureInPicture</span>.<span class=\"title function_\">requestWindow</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">width</span>: <span class=\"number\">200</span>, <span class=\"comment\">// 设置窗口的宽度</span></span><br><span class=\"line\">      <span class=\"attr\">height</span>: <span class=\"number\">300</span>, <span class=\"comment\">// 设置窗口的高度</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 将原始元素添加到 PiP 窗口中</span></span><br><span class=\"line\">    pipWindow.<span class=\"property\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">appendChild</span>(pipContent);</span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n","text":"Document Picture-in-Picture 介绍文档画中画 (Document Picture-in-Picture, 本文简称 PiP)。 你可能...","permalink":"/post/前端实现画中画","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"JS","slug":"JS","count":5,"path":"api/categories/JS.json"}],"tags":[{"name":"JS","slug":"JS","count":5,"path":"api/tags/JS.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Document-Picture-in-Picture-%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">Document Picture-in-Picture 介绍</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#HTML-%E5%9F%BA%E6%9C%AC%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">HTML 基本代码结构</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AF%B7%E6%B1%82-PiP-%E7%AA%97%E5%8F%A3\"><span class=\"toc-text\">请求 PiP 窗口</span></a></li></ol></li></ol>","author":{"name":"权栈","slug":"blog-author","avatar":"https://p6-passport.byteacctimg.com/img/user-avatar/40c734cabc45915e93f17b88134aa761~140x140.awebp","link":"/","description":"成就伟大的唯一途径就是热爱你所做的事情","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Vue3的provide和inject源码","uid":"6bbd855e83e27561534b81f565184962","slug":"Vue3的provide和inject源码","date":"2024-12-27T04:32:10.000Z","updated":"2024-12-27T06:37:20.925Z","comments":true,"path":"api/articles/Vue3的provide和inject源码.json","keywords":null,"cover":null,"text":"provide和inject函数是如何实现数据多级传递的。 看个demo代码如下： 123456789101112<template> <ChildDemo /...","permalink":"/post/Vue3的provide和inject源码","photos":[],"count_time":{"symbolsCount":"4.5k","symbolsTime":"4 mins."},"categories":[{"name":"Vue3","slug":"Vue3","count":7,"path":"api/categories/Vue3.json"}],"tags":[{"name":"Vue3","slug":"Vue3","count":7,"path":"api/tags/Vue3.json"}],"author":{"name":"权栈","slug":"blog-author","avatar":"https://p6-passport.byteacctimg.com/img/user-avatar/40c734cabc45915e93f17b88134aa761~140x140.awebp","link":"/","description":"成就伟大的唯一途径就是热爱你所做的事情","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"vue 实现关键字高亮效果","uid":"13e59df8589be4afa367272d91271e61","slug":"vue 实现关键字高亮效果","date":"2024-11-29T06:23:50.000Z","updated":"2024-11-29T06:25:41.792Z","comments":true,"path":"api/articles/vue 实现关键字高亮效果.json","keywords":null,"cover":null,"text":"vue 实现关键字高亮效果这是啥子意思呢，就是类似于百度搜索，根据关键词搜索结果，搜索结果中，与关键词相同的字显示红色，仅此而已，没有什么大的功能。简单写一下d...","permalink":"/post/vue 实现关键字高亮效果","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"Vue","slug":"Vue","count":3,"path":"api/categories/Vue.json"}],"tags":[{"name":"Vue","slug":"Vue","count":3,"path":"api/tags/Vue.json"}],"author":{"name":"权栈","slug":"blog-author","avatar":"https://p6-passport.byteacctimg.com/img/user-avatar/40c734cabc45915e93f17b88134aa761~140x140.awebp","link":"/","description":"成就伟大的唯一途径就是热爱你所做的事情","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}