---
title: å‰ç«¯å¤§å±è‡ªé€‚åº”æ–¹æ¡ˆ
date: 2024-09-12 10:58:20
tags: JS
categories: JS
---

## æ˜“ç”¨ ğŸš€

è°ƒç”¨ä»…éœ€ä¸€è¡Œä»£ç ï¼Œå³å¯é€‚é…è®¾ç½®åˆ†è¾¨ç‡ä»¥ä¸‹çš„æ‰€æœ‰å±å¹•ï¼Œæ— éœ€ä»»ä½•å…¶ä»–è¾…åŠ©

## æ€§èƒ½ âš¡

åªå½±å“ä¸€ä¸ªå…ƒç´ æ ·å¼ï¼Œè®¡ç®—é‡æå°

## çµæ´» ğŸ’¥

å¯ä»¥ç»™é¡¹ç›®å…¨å±€è‡ªé€‚åº”ï¼Œä¹Ÿå¯ä»¥å•ç‹¬é¡µé¢åšè‡ªé€‚åº”

## åŸç†

å³åœ¨ scale ç­‰æ¯”ç¼©æ”¾çš„åŸºç¡€ä¸Šï¼Œè·å–å±å¹•çš„å®½åº¦é™¤ä»¥è®¾è®¡ç¨¿çš„å®½åº¦ï¼Œè·å–åˆ°å®½åº¦æ¯”ä¾‹å€¼ï¼›è·å–å±å¹•çš„é«˜åº¦é™¤ä»¥è®¾è®¡ç¨¿çš„é«˜åº¦ï¼Œè·å–åˆ°é«˜åº¦æ¯”ä¾‹å€¼ï¼›ä½¿ç”¨ transform: scale(x, x) åŠ¨æ€ç›‘å¬æ¥å®ç°é¡µé¢çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œä»è€Œè¿˜åŸ UI å›¾æ•ˆæœã€‚è¿™å¯ä»¥æ”¯æŒè®¾è®¡ç¨¿ä»¥ä¸‹çš„å„ç§åˆ†è¾¨ç‡ã€‚

## ä½¿ç”¨ä»£ç 

```js
* æ ¹æ®è§†å£å°ºå¯¸è°ƒæ•´ç»™å®šå…ƒç´ çš„ç¼©æ”¾æ¯”ä¾‹ã€‚
 * @param {HTMLElement} e - è¦è°ƒæ•´çš„å…ƒç´ ã€‚
 * @param {number} planWidth - å…ƒç´ çš„è®¡åˆ’å®½åº¦,é»˜è®¤1980pxã€‚
 * @param {number} planHeight - å…ƒç´ çš„è®¡åˆ’é«˜åº¦,é»˜è®¤1080pxã€‚
 */
    function selfAdaption(e, planWidth = 1980, planHeight = 1080) {
      /**
       * è·å–å®¢æˆ·ç«¯è§†å£çš„å½“å‰å°ºå¯¸ï¼Œå¹¶æ ¹æ®æœ€å°è®¡åˆ’å°ºå¯¸è¿›è¡Œè°ƒæ•´ã€‚
       * @returns {{width: number, height: number}} å®¢æˆ·ç«¯è§†å£çš„è°ƒæ•´åå®½åº¦å’Œé«˜åº¦ã€‚
       */
      console.log(planWidth, planHeight);
      const getClientDimensions = () => {
        // è·å–å®¢æˆ·ç«¯è§†å£çš„å½“å‰å®½åº¦å’Œé«˜åº¦
        let width = document.body.clientWidth || document.documentElement.clientWidth;
        let height = document.body.clientHeight || document.documentElement.clientHeight;
        // å¦‚æœè®¡åˆ’é«˜åº¦å°äº1080ï¼Œåˆ™è¿›è¡Œé«˜åº¦è°ƒæ•´
        if (planHeight < 1080) {
          height -= (1080 - planHeight);
        }
        // å¦‚æœè®¡åˆ’å®½åº¦å°äº1920ï¼Œåˆ™è¿›è¡Œå®½åº¦è°ƒæ•´
        if (planWidth < 1920) {
          width -= (1920 - planWidth);
        }
        return { width, height };
      };
      /**
       * æ ¹æ®å½“å‰è§†å£å°ºå¯¸æ›´æ–°å…ƒç´ çš„ç¼©æ”¾æ¯”ä¾‹ã€‚
       */
      const updateScale = () => {
        // è·å–è°ƒæ•´åçš„å®¢æˆ·ç«¯å°ºå¯¸
        const { width, height } = getClientDimensions();
        // è®¡ç®—å®½åº¦å’Œé«˜åº¦çš„ç¼©æ”¾æ¯”ä¾‹
        const ratioWidth = width / planWidth;
        const ratioHeight = height / planHeight;
        // å¯¹å…ƒç´ åº”ç”¨ç¼©æ”¾å˜æ¢
        e.style.transform = `scale(${ratioWidth}, ${ratioHeight})`;
      };
      // è®¾ç½®å…ƒç´ çš„åˆå§‹æ ·å¼
      e.style.cssText += `
    transform-origin: 0 0 0;
    display: flex;
    min-width: auto;
    min-height: auto;
    overflow: hidden;
    width: ${planWidth}px;
    height: ${planHeight}px;
  `;
      // åˆå§‹æ›´æ–°ç¼©æ”¾æ¯”ä¾‹
      updateScale();
      // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œåœ¨çª—å£è°ƒæ•´å¤§å°æ—¶æ›´æ–°ç¼©æ”¾æ¯”ä¾‹
      window.addEventListener('resize', updateScale);
    }
selfAdaptionï¼ˆeï¼‰ä¼ é€’çš„è¦è‡ªé€‚åº”æœ€å¤–å±‚dom
```

> ä½¿ç”¨ transform: scale è‡ªé€‚åº”åï¼Œåœ°å›¾ä¸Šç‚¹å‡»äº‹ä»¶å¤±æ•ˆï¼Œè§£å†³åŠæ³•ï¼š

```js
resetMapSize() {Â 
Â       let mapContent = document.getElementById("map");Â 
Â       mapContent.style.transform = `scale(${1 / ratioWidth},${1 / ratioHeight})`Â 
Â     }Â 
Â // ç”¨å®Œåè®°å¾—é”€æ¯ç›‘å¬äº‹ä»¶ æ¯”å¦‚ vue ä¸­Â 
Â destroyed () {Â 
Â     window.removeEventListener('resize',this.resetMapSize)Â 
Â   }Â 


```
