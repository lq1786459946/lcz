import{h as Q,e as L,r as p,D as W,c as k,l as a,j as i,u as t,F as x,n as P,a as v,q as B,t as g,x as S,b as I,s as m,p as C,E as X,C as Y,y as $,G as ee,v as A,z as le}from"./4Ktyr8G_.js";import{f as ae,V as te,r as oe,s as se}from"./BylaFZ_K.js";import{g as ie}from"./C3lmZdGn.js";import{g as re}from"./9bGsdqAp.js";import{s as ne}from"./tvO096eR.js";import{a as w}from"./-VStuZKb.js";import{V as ue}from"./D2UNG8S4.js";import{V as de,a as ce}from"./CT10tW2C.js";import{V as E,a as j,b as M,c as me,d as R}from"./BVo5q2wa.js";import{V as pe,a as ve}from"./C-RzmdHL.js";import{V as G}from"./awntUYIY.js";import{V as fe}from"./B01AR6UH.js";import{V as q,a as N}from"./DlxhMtx2.js";import{V as ge}from"./B8vluWYP.js";import{V as Z}from"./U2mkAfXu.js";import{V as Ve}from"./er4xnGW9.js";import{V as ye}from"./BuQiNUq5.js";import"./By1GlJfL.js";import"./BxUkLsYu.js";import"./DWGaNmQL.js";import"./Vc9XBB0d.js";import"./CryL740R.js";import"./BgxtWXOh.js";import"./D-5uWIj4.js";import"./ZuLc9MOj.js";/* empty css        */import"./BrBayNQn.js";import"./BJWT1Lrs.js";const he=(F,V,y)=>ie("/sciapi/api/tools/allToolsPage",{method:"post",params:{...y,current:F,size:V}}),Te={class:"ellipsis"},_e={class:"d-flex flex-wrap gap-4 justify-space-between"},be={class:"d-flex flex-wrap justify-sm-start justify-start"},ke={class:"mt-2"},xe={class:"pt-2"},Ce={class:"mt-n7 me-n3"},Ae={class:"three-line-ellipsis"},De={class:"ms-2"},Se={class:"d-flex flex-wrap justify-end gap-y-2 mt-2"},ol={__name:"[id]",setup(F){const V=Q(),{setLocaleMessage:y}=L({useScope:"global"}),{t:d}=L(),o=p({snackbar:!1,color:"success",location:"top",timeout:1500,text:"成功"});let U=[{id:0,titleEn:"All",titleZh:"全部",children:[]}],h=p(!1),r=p({ToolName:"",AnalysisTopic:0,AnalysisType:0});const n=p({total:0,currentPage:1,pageSize:10,options:[10,20,50,100]});let D=p([]),_=p([]),f=p([]);(()=>{P(()=>{re().then(s=>{let e=[...U,...s.data];for(let u of e){w(u,y);for(let l of u.children)w(l,y)}D.value=e,z(e[0].id)})})})();const z=s=>{r.value.toolName="";const e=D.value.find(u=>u.id===s);_.value=[...U,...(e==null?void 0:e.children)||[]],r.value.AnalysisType=_.value[0].id,b()},b=()=>{n.value.currentPage=1,T()},H=s=>{s.toolFavoritesId?K(s.toolFavoritesId):J(s.id)},J=s=>{se({toolId:s,memberId:V.getUserData.user_id}).then(e=>{e.code==200?(o.value.snackbar=!0,o.value.text=d("myCollection.Save"),o.value.color="success",T()):(o.value.snackbar=!0,o.value.text=e.msg,o.value.color="error")}).catch(e=>{o.value.snackbar=!0,o.value.text=e,o.value.color="error"})},K=s=>{oe(s).then(e=>{e.code==200?(o.value.snackbar=!0,o.value.text=d("myCollection.Cancel"),o.value.color="success",T()):(o.value.snackbar=!0,o.value.text=e.msg,o.value.color="error")}).catch(e=>{o.value.snackbar=!0,o.value.text=e,o.value.color="error"})},T=()=>{let s={};if(r.value.AnalysisType)s.toolTypeIds=[r.value.AnalysisType];else if(r.value.AnalysisTopic){let e=[];for(let u of _.value)u.id&&e.push(u.id);if(e.length)s.toolTypeIds=e;else{n.value.total=0,f.value=[];return}}h.value=!0,r.value.toolName&&(s.toolName=r.value.toolName),P(()=>{he(n.value.currentPage,n.value.pageSize,s).then(e=>{if(e.code==200){let u=e.data;n.value.total=u.total;let l=u.records;for(let c of l)c.logo=c.toolLogoFileList&&c.toolLogoFileList.length?c.toolLogoFileList[0].link:ne,w(c,y);f.value=l}h.value=!1}).catch(e=>{console.log(e),h.value=!1})})};return T(),(s,e)=>{const u=W("IconBtn");return v(),k(x,null,[a(ue,{modelValue:o.value.snackbar,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.snackbar=l),color:o.value.color,location:o.value.location,timeout:o.value.timeout},{default:i(()=>[B(g(o.value.text),1)]),_:1},8,["modelValue","color","location","timeout"]),a(de,{modelValue:t(r).AnalysisTopic,"onUpdate:modelValue":[e[1]||(e[1]=l=>t(r).AnalysisTopic=l),z],class:"v-tabs-pill"},{default:i(()=>[(v(!0),k(x,null,S(t(D),l=>(v(),I(ce,{key:l.id,value:l.id},{default:i(()=>[m("div",Te,g(t(d)(`title_${l.id}`)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(E,{class:"mt-2"},{default:i(()=>[a(j,null,{default:i(()=>[a(M),a(me,null,{default:i(()=>[m("div",_e,[m("div",be,[m("div",ke,g(t(d)("allTools.AnalysisType"))+" :",1),a(pe,{modelValue:t(r).AnalysisType,"onUpdate:modelValue":[e[2]||(e[2]=l=>t(r).AnalysisType=l),b],inline:""},{default:i(()=>[(v(!0),k(x,null,S(t(_),(l,c)=>(v(),I(ve,{key:c,label:t(d)(`title_${l.id}`),value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),a(G),m("div",xe,[a(fe,{clearable:"",modelValue:t(r).toolName,"onUpdate:modelValue":[e[3]||(e[3]=l=>t(r).toolName=l),b],placeholder:t(d)("allTools.InputPlaceholder")+" "+t(d)("allTools.AnalysisName"),style:{"inline-size":"300px"},"prepend-inner-icon":"ri-search-line",density:"compact",label:t(d)("allTools.AnalysisName"),variant:"outlined"},null,8,["modelValue","placeholder","label"])])])]),_:1})]),_:1}),a(X,{active:t(h),indeterminate:t(h),color:"primary"},null,8,["active","indeterminate"]),C(a(q,{class:"pl-5 pr-5"},{default:i(()=>[(v(!0),k(x,null,S(t(f),(l,c)=>(v(),I(N,{key:c,sm:"4",cols:"12",md:"4"},{default:i(()=>[a(E,{onClick:O=>("navigateTo"in s?s.navigateTo:t(Y))("/analysisTool/"+l.id,{replace:!0})},{default:i(()=>[a(q,{gutter:0,class:"ma-0"},{default:i(()=>[a(N,{cols:"12",md:"5",class:"ma-auto"},{default:i(()=>[a($,{class:"ma-auto",width:"130",height:"130",src:l.logo},null,8,["src"])]),_:2},1024),a(ge,{vertical:s.$vuetify.display.mdAndUp},null,8,["vertical"]),a(N,{cols:"12",md:"7",class:"pa-0"},{default:i(()=>[a(j,null,{append:i(()=>[C(m("div",Ce,[a(u,{size:"small",icon:"ri-star-fill",color:l.toolFavoritesId?"#FFB22C":"#E2E2E2",onClick:ee(O=>H(l),["stop"]),class:"me-1"},null,8,["color","onClick"])],512),[[A,t(V).getUserData&&t(V).getUserData.user_id]])]),default:i(()=>[a(M,null,{default:i(()=>[B(g(t(d)(`toolName_${l.id}`)),1)]),_:2},1024)]),_:2},1024),a(Z,null,{default:i(()=>[m("div",Ae,g(t(d)(`toolDescription_${l.id}`)),1)]),_:2},1024),a(R,{class:"justify-space-between"},{default:i(()=>[a(le,null,{default:i(()=>[a($,{src:t(ae),alt:"",height:"20",width:"20"},null,8,["src"]),m("span",De,g(l.usedCount),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1},512),[[A,t(f).length]]),C(a(R,null,{default:i(()=>[a(G),a(Z,{class:"pt-2"},{default:i(()=>[m("div",Se,[a(Ve,{modelValue:n.value.pageSize,"onUpdate:modelValue":[e[4]||(e[4]=l=>n.value.pageSize=l),b],items:n.value.options,label:"",style:{"max-inline-size":"6rem","min-inline-size":"4rem","margin-right":"1rem"}},null,8,["modelValue","items"]),a(ye,{modelValue:n.value.currentPage,"onUpdate:modelValue":[e[5]||(e[5]=l=>n.value.currentPage=l),T],"total-visible":s.$vuetify.display.smAndDown?2:3,length:Math.ceil(n.value.total/n.value.pageSize)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1},512),[[A,t(f).length]]),C(a(te,{height:"500px",headline:"",title:"",text:t(d)("myCollection.noDataText")},null,8,["text"]),[[A,!t(f).length]])]),_:1})],64)}}};export{ol as default};
