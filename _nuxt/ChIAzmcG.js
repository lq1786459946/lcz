import{_ as Ve}from"./Nr0h-sSv.js";import{_ as ye,H as be,r as u,e as K,i as Q,I as _e,h as xe,w as ke,c as G,l as a,j as n,J as O,u as e,F as X,a as y,s as w,K as z,t as g,m as Ce,x as Fe,b as Be,d as Y,G as M,z as j,q as b,L as Ie,C as Z,M as $e,N as Ue}from"./4Ktyr8G_.js";import{v as ee,a as A,b as ae}from"./DKz0NZsm.js";import{s as le}from"./BvwAGGOz.js";import{r as oe,a as se,b as Ne,c as Ee}from"./C3lmZdGn.js";import{f as Se,a as Te,l as Re,b as Le}from"./9axVOA3h.js";import{_ as De}from"./ODLO72Th.js";import{V as ne}from"./BKBrnQ3t.js";import{V as W,a as p}from"./DlxhMtx2.js";import{V as q}from"./U2mkAfXu.js";import{V as Ge,a as Me}from"./CT10tW2C.js";import{V as re}from"./M4sPlSOX.js";import{V as m}from"./B01AR6UH.js";import{V as je}from"./er4xnGW9.js";import"./By1GlJfL.js";import"./BrBayNQn.js";import"./BxUkLsYu.js";import"./DWGaNmQL.js";import"./Vc9XBB0d.js";import"./CryL740R.js";import"./B8vluWYP.js";/* empty css        */import"./BgxtWXOh.js";import"./ZuLc9MOj.js";import"./BJWT1Lrs.js";import"./D-5uWIj4.js";const te=_=>($e("data-v-13527b07"),_=_(),Ue(),_),Ae={class:"auth-logo d-flex align-center gap-x-3"},Oe={flat:"",class:"mt-12 mt-sm-0 pa-4"},ze={class:"text-h4 mb-1"},We={key:0},qe=te(()=>w("div",{class:"d-flex align-center my-3 gap-2"},null,-1)),He={key:1},Je=te(()=>w("div",{class:"d-flex align-center my-3 gap-2"},null,-1)),Ke={class:"text-center text-base"},Qe={__name:"forgot-password",setup(_){const ie=be(),H=u(ie.name),{locale:de}=K({useScope:"global"}),ue=Q(()=>H.value==="dark"?Se:Te),pe=Q(()=>H.value==="dark"?Re:Le),{t:l}=K(),{$phonePrefix:fe}=_e();xe();const c=u(0),v=u(0),x=u(!1),k=u(!1),C=u(!1),F=u(!1),i=u({email:void 0,code:void 0,username:void 0,password:void 0,newPassword:void 0}),d=u({phone:void 0,code:void 0,username:void 0,password:void 0,newPassword:void 0}),J=u(),t=u({email:"",code:"",password:"",newPassword:""}),s=u({phone:"",code:"",password:"",newPassword:"",phonePrefix:"+86"}),B=u(!1),I=u(!1),$=u(!1),U=u(!1),me=u([{title:"Email Retrieval"},{title:"Mobile Retrieval"}]),h=u("Email retrieval");ke(de,()=>{h.value==0?(i.value.email&&P(),i.value.code&&N(),i.value.password&&E(),i.value.newPassword&&S()):(d.value.phone&&V(),d.value.code&&T(),d.value.password&&R(),d.value.newPassword&&L())});const P=()=>t.value.email.length!=0?typeof ee(t.value.email)=="string"?(i.value.email=l(ee(t.value.email)),!1):(i.value.email=void 0,!0):(i.value.email=l("login.Please enter your email address"),!1),N=()=>t.value.code.length!=0?(i.value.code=void 0,!0):(i.value.code=l("login.Please enter your verification code"),!1),E=()=>t.value.password.length!=0?typeof A(t.value.password)=="string"?(i.value.password=l(A(t.value.password)),!1):(i.value.password=void 0,!0):(i.value.password=l("login.Please enter your password"),!1),S=()=>t.value.newPassword.length!=0?t.value.password!==t.value.newPassword?(i.value.newPassword=l("login.PasswordsDoNotMatch"),!1):(i.value.newPassword=void 0,!0):(i.value.newPassword=l("login.Please enter your password again"),!1),V=()=>s.value.phone.length!=0?typeof ae(s.value.phonePrefix,s.value.phone)=="string"?(d.value.phone=l(ae(s.value.phonePrefix,s.value.phone)),!1):(d.value.phone=void 0,!0):(d.value.phone=l("login.Please enter your phone number"),!1),T=()=>s.value.code.length!=0?(d.value.code=void 0,!0):(d.value.code=l("login.Please enter your verification code"),!1),R=()=>s.value.password.length!=0?typeof A(s.value.password)=="string"?(d.value.password=l(A(s.value.password)),!1):(d.value.password=void 0,!0):(d.value.password=l("login.Please enter your password"),!1),L=()=>s.value.newPassword.length!=0?s.value.password!==s.value.newPassword?(d.value.newPassword=l("login.PasswordsDoNotMatch"),!1):(d.value.newPassword=void 0,!0):(d.value.newPassword=l("login.Please enter your password again"),!1),ce=()=>{B.value=!0,Ne(t.value.email,"FORGOT_PWD").then(f=>{B.value=!1,c.value=60;const o=le(()=>{c.value--,c.value<=0&&clearInterval(o)},1e3)}).catch(f=>{B.value=!1})},ve=()=>{if(P()){if(c.value>0)return;ce()}},ge=()=>{$.value=!0;const f=`${s.value.phonePrefix} ${s.value.phone}`;Ee(f,"FORGOT_PWD").then(o=>{$.value=!1,v.value=60;const D=le(()=>{v.value--,v.value<=0&&clearInterval(D)},1e3)}).catch(o=>{$.value=!1})},we=()=>{if(V()){if(v.value>0)return;ge()}},he=()=>{P(),N(),E(),S(),P()&&N()&&E()&&S()&&(I.value=!0,oe(t.value.email,"",t.value.code,t.value.password,t.value.newPassword).then(f=>{se("primary",l("login.updatePassword")),I.value=!1,setTimeout(()=>{Z("/login",{replace:!0})},2e3)}).catch(f=>{I.value=!1}))},Pe=()=>{V(),T(),R(),L(),V()&&T()&&R()&&L()&&(U.value=!0,oe("",s.value.phone,s.value.code,s.value.password,s.value.newPassword).then(f=>{se("primary",l("login.updatePassword")),U.value=!1,setTimeout(()=>{Z("/login",{replace:!0})},2e3)}).catch(f=>{U.value=!1}))};return(f,o)=>{const D=Ve;return y(),G(X,null,[a(D,{to:"/"},{default:n(()=>[w("div",Ae,[a(e(ne),{nodes:e(z).app.logo},null,8,["nodes"]),a(e(ne),{nodes:e(z).app.titleLogo},null,8,["nodes"])])]),_:1}),a(W,{"no-gutters":"",class:"auth-wrapper",style:O({backgroundImage:`url(${e(pe)})`})},{default:n(()=>[a(p,{md:"8",class:"d-none d-md-flex position-relative"}),a(p,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center",style:O({backgroundImage:`url(${e(ue)})`})},{default:n(()=>[a(De,{class:"z-I18n",languages:e(z).app.i18n.langConfig},null,8,["languages"]),w("div",Oe,[a(q,null,{default:n(()=>[w("h4",ze,g(e(l)("login.Forgot Password"))+" 🔒",1)]),_:1}),a(q,null,{default:n(()=>[a(Ge,{modelValue:e(h),"onUpdate:modelValue":o[0]||(o[0]=r=>Ce(h)?h.value=r:null),"fixed-tabs":"",class:"custom-underlined-tabs"},{default:n(()=>[(y(!0),G(X,null,Fe(e(me),r=>(y(),Be(Me,{key:r.title},{default:n(()=>[w("span",null,g(e(l)(`login.${r.title}`)),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),a(q,{style:O({width:f.$vuetify.display.lgAndUp?"28rem":"auto"})},{default:n(()=>[e(h)==0?(y(),G("div",We,[a(e(re),{ref_key:"refVForm",ref:J,onSubmit:M(he,["prevent"])},{default:n(()=>[a(W,null,{default:n(()=>[a(p,{cols:"12"},{default:n(()=>[a(m,{modelValue:e(t).email,"onUpdate:modelValue":o[1]||(o[1]=r=>e(t).email=r),label:e(l)("login.Email"),placeholder:"johndoe@email.com",type:"email","error-messages":e(i).email,onBlur:P},null,8,["modelValue","label","error-messages"])]),_:1}),a(p,{cols:"12"},{default:n(()=>[a(m,{modelValue:e(t).code,"onUpdate:modelValue":o[2]||(o[2]=r=>e(t).code=r),label:e(l)("login.VerificationCode"),placeholder:"","error-messages":e(i).code,onBlur:N},{append:n(()=>[a(j,{block:"",loading:e(B),style:{height:"100%"},disabled:e(c)>0||e(t).email.length==0,onClick:M(ve,["stop"])},{default:n(()=>[b(g(e(c)>0?`${e(c)}s ${e(l)("login.Retry")}`:e(l)("login.GetVerificationCode")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","label","error-messages"])]),_:1}),a(p,{cols:"12"},{default:n(()=>[a(m,{modelValue:e(t).password,"onUpdate:modelValue":o[3]||(o[3]=r=>e(t).password=r),label:e(l)("login.Password"),placeholder:"············",type:e(x)?"text":"password","append-inner-icon":e(x)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":o[4]||(o[4]=r=>x.value=!e(x)),"error-messages":e(i).password,onBlur:E},null,8,["modelValue","label","type","append-inner-icon","error-messages"])]),_:1}),a(p,{cols:"12"},{default:n(()=>[a(m,{modelValue:e(t).newPassword,"onUpdate:modelValue":o[5]||(o[5]=r=>e(t).newPassword=r),label:e(l)("login.newPassword"),placeholder:"············",type:e(k)?"text":"password","append-inner-icon":e(k)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":o[6]||(o[6]=r=>k.value=!e(k)),"error-messages":e(i).newPassword,onBlur:S},null,8,["modelValue","label","type","append-inner-icon","error-messages"]),qe,a(j,{block:"",type:"submit",loading:e(I)},{default:n(()=>[b(g(e(l)("login.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)])):Y("",!0),e(h)==1?(y(),G("div",He,[a(e(re),{ref_key:"refVForm",ref:J,onSubmit:M(Pe,["prevent"])},{default:n(()=>[a(W,null,{default:n(()=>[a(p,{cols:"12"},{default:n(()=>[a(m,{modelValue:e(s).phone,"onUpdate:modelValue":o[8]||(o[8]=r=>e(s).phone=r),label:e(l)("login.phone"),placeholder:"","error-messages":e(d).phone,onBlur:V},{prepend:n(()=>[a(je,{modelValue:e(s).phonePrefix,"onUpdate:modelValue":o[7]||(o[7]=r=>e(s).phonePrefix=r),items:e(fe)},null,8,["modelValue","items"])]),_:1},8,["modelValue","label","error-messages"])]),_:1}),a(p,{cols:"12"},{default:n(()=>[a(m,{modelValue:e(s).code,"onUpdate:modelValue":o[9]||(o[9]=r=>e(s).code=r),label:e(l)("login.VerificationCode"),placeholder:"","error-messages":e(d).code,onBlur:T},{append:n(()=>[a(j,{block:"",loading:e($),style:{height:"100%"},disabled:e(v)>0||e(s).phone.length==0,onClick:M(we,["stop"])},{default:n(()=>[b(g(e(v)>0?`${e(v)}s ${e(l)("login.Retry")}`:e(l)("login.GetVerificationCode")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","label","error-messages"])]),_:1}),a(p,{cols:"12"},{default:n(()=>[a(m,{modelValue:e(s).password,"onUpdate:modelValue":o[10]||(o[10]=r=>e(s).password=r),label:e(l)("login.Password"),placeholder:"············",type:e(C)?"text":"password","append-inner-icon":e(C)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":o[11]||(o[11]=r=>C.value=!e(C)),"error-messages":e(d).password,onBlur:R},null,8,["modelValue","label","type","append-inner-icon","error-messages"])]),_:1}),a(p,{cols:"12"},{default:n(()=>[a(m,{modelValue:e(s).newPassword,"onUpdate:modelValue":o[12]||(o[12]=r=>e(s).newPassword=r),label:e(l)("login.newPassword"),placeholder:"············",type:e(F)?"text":"password","append-inner-icon":e(F)?"ri-eye-off-line":"ri-eye-line","onClick:appendInner":o[13]||(o[13]=r=>F.value=!e(F)),"error-messages":e(d).newPassword,onBlur:L},null,8,["modelValue","label","type","append-inner-icon","error-messages"]),Je,a(j,{block:"",type:"submit",loading:e(U)},{default:n(()=>[b(g(e(l)("login.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)])):Y("",!0),a(p,{cols:"12"},{default:n(()=>[w("div",Ke,[a(D,{class:"d-flex align-center justify-center text-primary d-inline-block",to:{name:"login"}},{default:n(()=>[a(Ie,{icon:"ri-arrow-left-s-line"}),b(g(e(l)("login.back to login")),1)]),_:1})])]),_:1})]),_:1},8,["style"])])]),_:1},8,["style"])]),_:1},8,["style"])],64)}}},_a=ye(Qe,[["__scopeId","data-v-13527b07"]]);export{_a as default};
