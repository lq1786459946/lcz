{"title":"前端优化首次加载速度","uid":"56ce95bec0e493691d1f055dfbf1898e","slug":"前端优化首次加载速度","date":"2024-09-20T07:08:20.000Z","updated":"2024-09-20T07:23:32.511Z","comments":true,"path":"api/articles/前端优化首次加载速度.json","keywords":null,"cover":[],"content":"<h2 id=\"compression-webpack-plugin\"><a href=\"#compression-webpack-plugin\" class=\"headerlink\" title=\"compression-webpack-plugin\"></a>compression-webpack-plugin</h2><p>compression-webpack-plugin 是一个 Webpack 插件，用于压缩生成的静态文件，通常是使用 Gzip 或 Brotli 压缩格式。这有助于减小文件大小，从而提高网页加载速度和性能。</p>\n<h2 id=\"clean-webpack-plugin\"><a href=\"#clean-webpack-plugin\" class=\"headerlink\" title=\"clean-webpack-plugin\"></a>clean-webpack-plugin</h2><p>clean-webpack-plugin 是一个 Webpack 插件，用于在每次构建前自动清理输出目录（如 dist 文件夹），以确保新构建的文件是最新的，避免遗留旧文件。</p>\n<h2 id=\"terser-webpack-plugin\"><a href=\"#terser-webpack-plugin\" class=\"headerlink\" title=\"terser-webpack-plugin\"></a>terser-webpack-plugin</h2><p>terser-webpack-plugin 是一个 Webpack 插件，用于压缩和混淆 JavaScript 代码，通常在生产环境中使用。它基于 Terser 工具，能够有效地减少 JavaScript 文件的体积，从而提高网页加载速度。</p>\n<h2 id=\"html-webpack-plugin\"><a href=\"#html-webpack-plugin\" class=\"headerlink\" title=\"html-webpack-plugin\"></a>html-webpack-plugin</h2><p>html-webpack-plugin 是一个 Webpack 插件，用于简化生成 HTML 文件的过程，通常用于将打包的 JavaScript 和 CSS 文件自动注入到 HTML 模板中。</p>\n<h2 id=\"vue-preload-webpack-plugin\"><a href=\"#vue-preload-webpack-plugin\" class=\"headerlink\" title=\"@vue&#x2F;preload-webpack-plugin\"></a>@vue&#x2F;preload-webpack-plugin</h2><p>@vue&#x2F;preload-webpack-plugin 是一个 Webpack 插件，主要用于优化 Vue 应用的资源加载性能。它可以自动添加 <link rel=\"preload\"> 标签到生成的 HTML 文件中，以便浏览器预加载关键资源（如 JavaScript 和 CSS 文件）。</p>\n<p>vue.config 文件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> px2rem = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;postcss-px2rem&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> postcss = <span class=\"title function_\">px2rem</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">remUnit</span>: <span class=\"number\">37.5</span>, <span class=\"comment\">// 基准大小 baseSize，需要和rem.js中相同</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> productionGzipExtensions = <span class=\"regexp\">/\\.(js|css|json|txt|html|ico|svg)(\\?.*)?$/i</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">CompressionPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;compression-webpack-plugin&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">CleanWebpackPlugin</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;clean-webpack-plugin&quot;</span>); <span class=\"comment\">// 用于在每次构建前清理 /dist 文件夹</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">TerserPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;terser-webpack-plugin&quot;</span>); <span class=\"comment\">// 用于压缩 JavaScript 代码</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; <span class=\"title class_\">BundleAnalyzerPlugin</span> &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;webpack-bundle-analyzer&quot;</span>); <span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">HtmlWebpackPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;html-webpack-plugin&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">PreloadPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;@vue/preload-webpack-plugin&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;events&quot;</span>).<span class=\"property\">EventEmitter</span>.<span class=\"property\">defaultMaxListeners</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 路径前缀</span></span><br><span class=\"line\">  <span class=\"attr\">publicPath</span>: process.<span class=\"property\">env</span>.<span class=\"property\">VUE_APP_PUBLICPATH</span>,</span><br><span class=\"line\">  <span class=\"attr\">assetsDir</span>: <span class=\"string\">&quot;static&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 是否启用 eslint-loader 在保存时检查代码</span></span><br><span class=\"line\">  <span class=\"attr\">lintOnSave</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 是否生成 source map 文件，生产环境可以关闭以提升打包速度</span></span><br><span class=\"line\">  <span class=\"attr\">productionSourceMap</span>: process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> == <span class=\"string\">&quot;development&quot;</span>,</span><br><span class=\"line\">  <span class=\"comment\">// 扩展 webpack-chain 配置，进一步优化 Webpack 配置</span></span><br><span class=\"line\">  <span class=\"attr\">chainWebpack</span>: <span class=\"function\">(<span class=\"params\">config</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 忽略的打包文件</span></span><br><span class=\"line\">    config.<span class=\"title function_\">externals</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">vue</span>: <span class=\"string\">&quot;Vue&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;vue-router&quot;</span>: <span class=\"string\">&quot;VueRouter&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">vuex</span>: <span class=\"string\">&quot;Vuex&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">axios</span>: <span class=\"string\">&quot;axios&quot;</span>,</span><br><span class=\"line\">      <span class=\"string\">&quot;element-ui&quot;</span>: <span class=\"string\">&quot;ELEMENT&quot;</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 配置入口文件</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> entry = config.<span class=\"title function_\">entry</span>(<span class=\"string\">&quot;app&quot;</span>);</span><br><span class=\"line\">    entry.<span class=\"title function_\">add</span>(<span class=\"string\">&quot;babel-polyfill&quot;</span>).<span class=\"title function_\">end</span>();</span><br><span class=\"line\">    entry.<span class=\"title function_\">add</span>(<span class=\"string\">&quot;classlist-polyfill&quot;</span>).<span class=\"title function_\">end</span>();</span><br><span class=\"line\">    entry.<span class=\"title function_\">add</span>(<span class=\"string\">&quot;@/mock&quot;</span>).<span class=\"title function_\">end</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// // 配置预加载和预取，优化加载性能</span></span><br><span class=\"line\">    <span class=\"comment\">// config.plugin(&quot;preload&quot;).tap((options) =&gt; &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   options[0].fileBlacklist.push(/\\.map$/, /hot-update\\.js$/);</span></span><br><span class=\"line\">    <span class=\"comment\">//   return options;</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;);</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 移除 prefetch 插件，避免加载不必要的资源</span></span><br><span class=\"line\">    <span class=\"comment\">// config.plugins.delete(&quot;prefetch&quot;);</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 配置 Webpack</span></span><br><span class=\"line\">  <span class=\"attr\">configureWebpack</span>: <span class=\"function\">(<span class=\"params\">config</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> plugins = [</span><br><span class=\"line\">      <span class=\"keyword\">new</span> <span class=\"title class_\">CleanWebpackPlugin</span>(),</span><br><span class=\"line\">      <span class=\"keyword\">new</span> <span class=\"title class_\">HtmlWebpackPlugin</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">filename</span>: <span class=\"string\">&quot;index.html&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">template</span>: <span class=\"string\">&quot;public/index.html&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">inject</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">templateParameters</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">BASE_URL</span>: <span class=\"string\">&quot;/&quot;</span>, <span class=\"comment\">// 传递 BASE_URL 到模板</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;),</span><br><span class=\"line\">      <span class=\"keyword\">new</span> <span class=\"title class_\">PreloadPlugin</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">rel</span>: <span class=\"string\">&quot;preload&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">include</span>: <span class=\"string\">&quot;initial&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">fileBlacklist</span>: [<span class=\"regexp\">/\\.map$/</span>, <span class=\"regexp\">/hot-update\\.js$/</span>, <span class=\"regexp\">/vendor\\..*\\.js$/</span>],</span><br><span class=\"line\">        <span class=\"comment\">// 根据需要进行更多配置</span></span><br><span class=\"line\">      &#125;),</span><br><span class=\"line\">    ];</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (</span><br><span class=\"line\">      process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> === <span class=\"string\">&quot;production&quot;</span> ||</span><br><span class=\"line\">      process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> === <span class=\"string\">&quot;test&quot;</span></span><br><span class=\"line\">    ) &#123;</span><br><span class=\"line\">      plugins.<span class=\"title function_\">push</span>(</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">CompressionPlugin</span>(&#123;</span><br><span class=\"line\">          <span class=\"attr\">filename</span>: <span class=\"string\">&quot;[path][base].gz&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">algorithm</span>: <span class=\"string\">&quot;gzip&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">test</span>: productionGzipExtensions,</span><br><span class=\"line\">          <span class=\"attr\">threshold</span>: <span class=\"number\">10240</span>,</span><br><span class=\"line\">          <span class=\"attr\">minRatio</span>: <span class=\"number\">0.8</span>,</span><br><span class=\"line\">          <span class=\"attr\">deleteOriginalAssets</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">          <span class=\"comment\">// exclude: /(cdn|util)\\/.*\\.(js|css|json|txt|html|ico|svg)$/i,</span></span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">        <span class=\"keyword\">new</span> <span class=\"title class_\">BundleAnalyzerPlugin</span>(&#123;</span><br><span class=\"line\">          <span class=\"attr\">analyzerMode</span>: <span class=\"string\">&quot;static&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">reportFilename</span>: <span class=\"string\">&quot;bundle-report.html&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">openAnalyzer</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      );</span><br><span class=\"line\"></span><br><span class=\"line\">      config.<span class=\"property\">optimization</span> = &#123;</span><br><span class=\"line\">        <span class=\"attr\">minimize</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">minimizer</span>: [</span><br><span class=\"line\">          <span class=\"keyword\">new</span> <span class=\"title class_\">TerserPlugin</span>(&#123;</span><br><span class=\"line\">            <span class=\"attr\">terserOptions</span>: &#123;</span><br><span class=\"line\">              <span class=\"attr\">compress</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">drop_console</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">                <span class=\"attr\">drop_debugger</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">                <span class=\"attr\">comments</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"attr\">parallel</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">          &#125;),</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"attr\">splitChunks</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// Uncomment this block if needed</span></span><br><span class=\"line\">          <span class=\"attr\">chunks</span>: <span class=\"string\">&quot;all&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">maxInitialRequests</span>: <span class=\"number\">5</span>,</span><br><span class=\"line\">          <span class=\"attr\">minSize</span>: <span class=\"number\">30000</span>,</span><br><span class=\"line\">          <span class=\"attr\">maxSize</span>: <span class=\"number\">250000</span>,</span><br><span class=\"line\">          <span class=\"attr\">cacheGroups</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">vendor</span>: &#123;</span><br><span class=\"line\">              <span class=\"attr\">test</span>: <span class=\"regexp\">/[\\\\/]node_modules[\\\\/]/</span>,</span><br><span class=\"line\">              <span class=\"title function_\">name</span>(<span class=\"params\"><span class=\"variable language_\">module</span></span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">const</span> packageName = <span class=\"variable language_\">module</span>.<span class=\"property\">context</span>.<span class=\"title function_\">match</span>(</span><br><span class=\"line\">                  <span class=\"regexp\">/[\\\\/]node_modules[\\\\/](.*?)([\\\\/]|$)/</span></span><br><span class=\"line\">                )[<span class=\"number\">1</span>];</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"string\">`npm.<span class=\"subst\">$&#123;packageName.replace(<span class=\"string\">&quot;@&quot;</span>, <span class=\"string\">&quot;&quot;</span>)&#125;</span>`</span>;</span><br><span class=\"line\">              &#125;,</span><br><span class=\"line\">              <span class=\"attr\">priority</span>: -<span class=\"number\">10</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            <span class=\"attr\">common</span>: &#123;</span><br><span class=\"line\">              <span class=\"attr\">name</span>: <span class=\"string\">&quot;common&quot;</span>,</span><br><span class=\"line\">              <span class=\"attr\">minChunks</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">              <span class=\"attr\">priority</span>: -<span class=\"number\">20</span>,</span><br><span class=\"line\">              <span class=\"attr\">reuseExistingChunk</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">              <span class=\"attr\">chunks</span>: <span class=\"string\">&quot;all&quot;</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (process.<span class=\"property\">env</span>.<span class=\"property\">NODE_ENV</span> === <span class=\"string\">&quot;development&quot;</span>) &#123;</span><br><span class=\"line\">      config.<span class=\"property\">devtool</span> = <span class=\"string\">&quot;source-map&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    config.<span class=\"property\">plugins</span>.<span class=\"title function_\">push</span>(...plugins);</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">css</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">extract</span>: &#123; <span class=\"attr\">ignoreOrder</span>: <span class=\"literal\">true</span> &#125;,</span><br><span class=\"line\">    <span class=\"attr\">loaderOptions</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">postcss</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">plugins</span>: [postcss],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">transpileDependencies</span>: [<span class=\"string\">&quot;ol&quot;</span>],</span><br><span class=\"line\">  <span class=\"comment\">// 开发模式反向代理配置，生产模式请使用Nginx部署并配置反向代理</span></span><br><span class=\"line\">  <span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">1888</span>,</span><br><span class=\"line\">    <span class=\"attr\">proxy</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;/api&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 本地服务接口地址</span></span><br><span class=\"line\">        <span class=\"attr\">target</span>: process.<span class=\"property\">env</span>.<span class=\"property\">VUE_APP_BASE_API_COMMON_URL</span>,</span><br><span class=\"line\">        <span class=\"comment\">// 远程演示服务地址, 可用于直接启动项目</span></span><br><span class=\"line\">        <span class=\"comment\">// target: &#x27;https://saber.bladex.vip/api&#x27;,</span></span><br><span class=\"line\">        <span class=\"attr\">ws</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">pathRewrite</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">&quot;^/api&quot;</span>: <span class=\"string\">&quot;/&quot;</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 通过环境变量控制是否启用性能提示</span></span><br><span class=\"line\">  <span class=\"comment\">//  performance: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   hints: (process.env.NODE_ENV === &#x27;production&#x27; || process.env.NODE_ENV === &#x27;test&#x27;) ? &#x27;warning&#x27; : false</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"修改测试环境配置\"><a href=\"#修改测试环境配置\" class=\"headerlink\" title=\"修改测试环境配置\"></a>修改测试环境配置</h2><p>NODE_ENV 是一个环境变量，用于指示 Node.js 应用程序的运行环境。它通常有三个主要值： development 、 production 和 test 。</p>\n<p>只有 production 生成环境才会压缩文件 如果是 NODE_ENV&#x3D;test 改成 NODE_ENV&#x3D;production</p>\n<p><img src=\"https://atlas.pingcode.com/files/public/66ecd3315e0f3412bbbd3efe?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWRfZm9yX3B1YmljX2ltYWdlIjoiNDAyMTgwNDVhZjkzNDg3NTgyMDI5ZjNlZDI2ZjQ3ZmEiLCJ0ZWFtX2Zvcl9wdWJsaWNfaW1hZ2UiOiI2MTZkMmU2MzJhNjgwNWE3NWY4MjAxOTEiLCJpc19pbnRlcm5hbF90b2tlbiI6dHJ1ZSwiaWF0IjoxNzI2ODExNDYwLCJleHAiOjE3MjY4MjIyNjB9.skXyVJPe6TNvhJBiCDJx885ruVH84rnhluZ00YvkFm8\" alt=\"image.png\"></p>\n<h2 id=\"修改动态路由懒加载方式\"><a href=\"#修改动态路由懒加载方式\" class=\"headerlink\" title=\"修改动态路由懒加载方式\"></a>修改动态路由懒加载方式</h2><ol>\n<li><strong>加载时机</strong>：<ul>\n<li><code>require</code>：同步加载，运行时决定。</li>\n<li><code>import</code>：异步加载，编译时确定。</li>\n</ul>\n</li>\n<li><strong>作用域</strong>：<ul>\n<li><code>require</code>：在模块内部，作用域较封闭。</li>\n<li><code>import</code>：支持命名导入和默认导入，灵活性更高。</li>\n</ul>\n</li>\n<li><strong>环境</strong>：<ul>\n<li><code>require</code>：主要用于 Node.js。</li>\n<li><code>import</code>：适用于现代浏览器和支持 ES6 的环境。</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"https://atlas.pingcode.com/files/public/66ecd4cea95c5fca81a44c17?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWRfZm9yX3B1YmljX2ltYWdlIjoiNDAyMTgwNDVhZjkzNDg3NTgyMDI5ZjNlZDI2ZjQ3ZmEiLCJ0ZWFtX2Zvcl9wdWJsaWNfaW1hZ2UiOiI2MTZkMmU2MzJhNjgwNWE3NWY4MjAxOTEiLCJpc19pbnRlcm5hbF90b2tlbiI6dHJ1ZSwiaWF0IjoxNzI2ODExNDYwLCJleHAiOjE3MjY4MjIyNjB9.skXyVJPe6TNvhJBiCDJx885ruVH84rnhluZ00YvkFm8\" alt=\"image.png\"></p>\n","text":"compression-webpack-plugincompression-webpack-plugin 是一个 Webpack 插件，用于压缩生成的静态文件，...","permalink":"/post/前端优化首次加载速度","photos":[],"count_time":{"symbolsCount":"6.9k","symbolsTime":"6 mins."},"categories":[{"name":"Vue2","slug":"Vue2","count":1,"path":"api/categories/Vue2.json"}],"tags":[{"name":"Vue2","slug":"Vue2","count":1,"path":"api/tags/Vue2.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#compression-webpack-plugin\"><span class=\"toc-text\">compression-webpack-plugin</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#clean-webpack-plugin\"><span class=\"toc-text\">clean-webpack-plugin</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#terser-webpack-plugin\"><span class=\"toc-text\">terser-webpack-plugin</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#html-webpack-plugin\"><span class=\"toc-text\">html-webpack-plugin</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#vue-preload-webpack-plugin\"><span class=\"toc-text\">@vue&#x2F;preload-webpack-plugin</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">修改测试环境配置</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BF%AE%E6%94%B9%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">修改动态路由懒加载方式</span></a></li></ol>","author":{"name":"权栈","slug":"blog-author","avatar":"https://p6-passport.byteacctimg.com/img/user-avatar/40c734cabc45915e93f17b88134aa761~140x140.awebp","link":"/","description":"成就伟大的唯一途径就是热爱你所做的事情","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Vue3.5 useId","uid":"a4c1e6f4a7d260a2971f3f08fe46eea6","slug":"Vue3.5 useId","date":"2024-09-27T07:14:20.000Z","updated":"2024-09-27T07:19:33.170Z","comments":true,"path":"api/articles/Vue3.5 useId.json","keywords":null,"cover":null,"text":"useId的作用他的作用也是生成唯一ID，同一个Vue应用里面每次调用useId生成的ID都不同。 使用方法也很简单，代码如下： 123456789101112...","permalink":"/post/Vue3.5 useId","photos":[],"count_time":{"symbolsCount":757,"symbolsTime":"1 mins."},"categories":[{"name":"Vue3","slug":"Vue3","count":7,"path":"api/categories/Vue3.json"}],"tags":[{"name":"Vue3","slug":"Vue3","count":7,"path":"api/tags/Vue3.json"}],"author":{"name":"权栈","slug":"blog-author","avatar":"https://p6-passport.byteacctimg.com/img/user-avatar/40c734cabc45915e93f17b88134aa761~140x140.awebp","link":"/","description":"成就伟大的唯一途径就是热爱你所做的事情","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"前端大屏自适应方案","uid":"d5edacab67506b18e45fcb0990be9618","slug":"前端大屏自适应方案","date":"2024-09-12T02:58:20.000Z","updated":"2024-09-20T07:24:47.431Z","comments":true,"path":"api/articles/前端大屏自适应方案.json","keywords":null,"cover":null,"text":"易用 🚀调用仅需一行代码，即可适配设置分辨率以下的所有屏幕，无需任何其他辅助 性能 ⚡只影响一个元素样式，计算量极小 灵活 💥可以给项目全局自适应，也可以单独页...","permalink":"/post/前端大屏自适应方案","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"JS","slug":"JS","count":5,"path":"api/categories/JS.json"}],"tags":[{"name":"JS","slug":"JS","count":5,"path":"api/tags/JS.json"}],"author":{"name":"权栈","slug":"blog-author","avatar":"https://p6-passport.byteacctimg.com/img/user-avatar/40c734cabc45915e93f17b88134aa761~140x140.awebp","link":"/","description":"成就伟大的唯一途径就是热爱你所做的事情","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}