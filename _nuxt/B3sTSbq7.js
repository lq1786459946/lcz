import{h as O,e as L,r as p,br as J,as as K,aB as Q,D as W,c as y,l as e,j as o,F as z,n as P,a as g,q as B,t as m,p as _,s as h,u as t,m as X,a2 as Y,E as Z,x as ee,b as ae,G as I,C as te,y as U,v as C,z as le}from"./4Ktyr8G_.js";import{a as F}from"./-VStuZKb.js";import{s as oe}from"./tvO096eR.js";import{g as se,a as ie,f as ne,V as re,r as ue}from"./BylaFZ_K.js";import{V as ce}from"./D2UNG8S4.js";import{V as $,a as A,b as E,d as M}from"./BVo5q2wa.js";import{V as N}from"./awntUYIY.js";import{V as j}from"./er4xnGW9.js";import{a as me}from"./Vc9XBB0d.js";import{V as H,a as k}from"./DlxhMtx2.js";import{V as de}from"./B8vluWYP.js";import{V as R}from"./U2mkAfXu.js";import{V as pe}from"./BuQiNUq5.js";import"./C3lmZdGn.js";import"./By1GlJfL.js";import"./BxUkLsYu.js";import"./DWGaNmQL.js";import"./CryL740R.js";/* empty css        */import"./B01AR6UH.js";import"./ZuLc9MOj.js";import"./BrBayNQn.js";import"./BJWT1Lrs.js";import"./D-5uWIj4.js";import"./BgxtWXOh.js";const ve={key:0},fe={key:1,class:"text-disabled"},ge={class:"mt-n7 me-n3"},he={class:"three-line-ellipsis"},Ve={class:"ms-2"},ye={class:"d-flex flex-wrap justify-end gap-y-2 mt-2"},Je={__name:"myCollection",setup(_e){const x=O(),{t:i}=L(),{setLocaleMessage:w}=L({useScope:"global"});let v=p(!1);const n=p({total:0,currentPage:1,pageSize:10,options:[10,20,50,100]}),s=p({snackbar:!1,color:"success",location:"top",timeout:1500,text:"成功"});let d=p(""),T=J([]),f=p([]),S=p("600px");K(()=>{window.addEventListener("resize",b),b()}),Q(()=>{window.removeEventListener("resize",b)});const b=()=>{S.value=`${window.innerHeight-260}px`};(()=>{let r={level:1,status:1};P(()=>{se(r).then(l=>{let c=l.data;c.forEach(a=>{F(a,w)}),T=c})})})();const V=()=>{v.value=!0;let r={memberId:x.getUserData.user_id};d.value&&(r.toolTypeId=d.value),P(()=>{ie(n.value.currentPage,n.value.pageSize,r).then(l=>{if(l.code==200){let c=l.data;n.value.total=c.total;let a=c.records;for(let u of a)u.logo=u.toolLogoFileList&&u.toolLogoFileList.length?u.toolLogoFileList[0].link:oe,F(u,w);f.value=a}v.value=!1}).catch(l=>{console.log(l),v.value=!1})})};V();const D=()=>{n.value.currentPage=1,V()},q=r=>{ue(r).then(l=>{l.code==200?(s.value.snackbar=!0,s.value.text=i("myCollection.Cancel"),s.value.color="success",V()):(s.value.snackbar=!0,s.value.text=l.msg,s.value.color="error")}).catch(l=>{s.value.snackbar=!0,s.value.text=l,s.value.color="error"})};return(r,l)=>{const c=W("IconBtn");return g(),y(z,null,[e(ce,{modelValue:s.value.snackbar,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value.snackbar=a),color:s.value.color,location:s.value.location,timeout:s.value.timeout},{default:o(()=>[B(m(s.value.text),1)]),_:1},8,["modelValue","color","location","timeout"]),e($,null,{default:o(()=>[e(A,null,{default:o(()=>[e(E,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[h("span",null,m(t(i)("myCollection.MyCollection")),1),e(N),e(j,{modelValue:t(d),"onUpdate:modelValue":[l[1]||(l[1]=a=>X(d)?d.value=a:d=a),D],placeholder:t(i)("myCollection.SelectPlaceholder"),style:{"inline-size":"300px"},items:t(T),"item-value":"id",label:t(i)("myCollection.AnalysisTopic"),class:"flex-0-1 pt-2","no-value-text":t(i)("myCollection.SelectPlaceholder"),clearable:""},{item:o(({props:a,item:u})=>[e(me,Y(a,{title:t(i)(`title_${u.raw.id}`)}),null,16,["title"])]),selection:o(({item:a})=>[a&&a.raw?(g(),y("span",ve,m(t(i)(`title_${a.raw.id}`)),1)):(g(),y("span",fe,m(t(i)("myCollection.SelectPlaceholder")),1))]),_:1},8,["modelValue","placeholder","items","label","no-value-text"])]),_:1})]),_:1}),e(Z,{active:t(v),indeterminate:t(v),color:"primary"},null,8,["active","indeterminate"]),_(e(H,{class:"pl-5 pr-5"},{default:o(()=>[(g(!0),y(z,null,ee(t(f),(a,u)=>(g(),ae(k,{key:u,sm:"4",cols:"12",md:"4"},{default:o(()=>[e($,{onClick:I(G=>("navigateTo"in r?r.navigateTo:t(te))("/analysisTool/"+a.id,{replace:!0}),["self"])},{default:o(()=>[e(H,{gutter:0,class:"ma-0"},{default:o(()=>[e(k,{cols:"12",md:"5",class:"ma-auto"},{default:o(()=>[e(U,{class:"ma-auto",width:"130",height:"130",src:a.logo},null,8,["src"])]),_:2},1024),e(de,{vertical:r.$vuetify.display.mdAndUp},null,8,["vertical"]),e(k,{cols:"12",md:"7",class:"pa-0"},{default:o(()=>[e(A,null,{append:o(()=>[_(h("div",ge,[e(c,{size:"small",icon:"ri-star-fill",color:"#FFB22C",onClick:I(G=>q(a.toolFavoritesId),["stop"]),class:"me-1"},null,8,["onClick"])],512),[[C,t(x).getUserData&&t(x).getUserData.user_id]])]),default:o(()=>[e(E,null,{default:o(()=>[B(m(t(i)(`toolName_${a.id}`)),1)]),_:2},1024)]),_:2},1024),e(R,null,{default:o(()=>[h("div",he,m(t(i)(`toolDescription_${a.id}`)),1)]),_:2},1024),e(M,{class:"justify-space-between"},{default:o(()=>[e(le,null,{default:o(()=>[e(U,{src:t(ne),alt:"",height:"20",width:"20"},null,8,["src"]),h("span",Ve,m(a.usedCount),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1},512),[[C,t(f).length]]),_(e(re,{height:t(S),headline:"",title:"",text:t(i)("myCollection.noDataText")},null,8,["height","text"]),[[C,!t(f).length]]),_(e(M,null,{default:o(()=>[e(N),e(R,{class:"pt-2"},{default:o(()=>[h("div",ye,[e(j,{modelValue:n.value.pageSize,"onUpdate:modelValue":[l[2]||(l[2]=a=>n.value.pageSize=a),D],items:n.value.options,label:"",style:{"max-inline-size":"6rem","min-inline-size":"4rem","margin-right":"1rem"}},null,8,["modelValue","items"]),e(pe,{modelValue:n.value.currentPage,"onUpdate:modelValue":[l[3]||(l[3]=a=>n.value.currentPage=a),V],"total-visible":r.$vuetify.display.smAndDown?2:3,length:Math.ceil(n.value.total/n.value.pageSize)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1},512),[[C,t(f).length]])]),_:1})],64)}}};export{Je as default};
