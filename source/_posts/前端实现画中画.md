---
title: 前端实现画中画
date: 2024-112-20 14:05:20
tags: JS
categories: JS
---

## Document Picture-in-Picture 介绍

**文档画中画** (Document Picture-in-Picture, 本文简称 PiP)。

你可能已经在视频平台（如`腾讯视频`、`哔哩哔哩`等网页）见过这种效果：视频播放时，可以点击画中画后。无论你切换页面，它都始终显示在屏幕的最上层，

### HTML 基本代码结构

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document Picture-in-Picture API 示例</title>
    <style>
      #pipContent {
        width: 600px;
        height: 300px;
        background: pink;
        font-size: 20px;
      }
    </style>
  </head>

  <body>
    <div id="container">
      <div id="pipContent">这是一个将要放入画中画的 div 元素！</div>
      <button id="clickBtn">切换画中画</button>
    </div>
    <script>
      // 在这里写你的 JavaScript 代码
    </script>
  </body>
</html>
```

### 请求 PiP 窗口

`PiP` 的核心方法是 `window.documentPictureInPicture.requestWindow`。它是一个 `异步方法`，返回一个新创建的 `window` 对象。
`PIP 窗口`可以将其看作一个新的网页，但它始终悬浮在屏幕上方。

```js
document
  .getElementById("clickBtn")
  .addEventListener("click", async function () {
    // 获取将要放入 PiP 窗口的 DOM 元素
    const pipContent = document.getElementById("pipContent");
    // 请求创建一个 PiP 窗口
    const pipWindow = await window.documentPictureInPicture.requestWindow({
      width: 200, // 设置窗口的宽度
      height: 300, // 设置窗口的高度
    });

    // 将原始元素添加到 PiP 窗口中
    pipWindow.document.body.appendChild(pipContent);
  });
```
