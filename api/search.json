[{"id":"d5edacab67506b18e45fcb0990be9618","title":"å‰ç«¯å¤§å±è‡ªé€‚åº”æ–¹æ¡ˆ","content":"æ˜“ç”¨ ğŸš€è°ƒç”¨ä»…éœ€ä¸€è¡Œä»£ç ï¼Œå³å¯é€‚é…è®¾ç½®åˆ†è¾¨ç‡ä»¥ä¸‹çš„æ‰€æœ‰å±å¹•ï¼Œæ— éœ€ä»»ä½•å…¶ä»–è¾…åŠ©\næ€§èƒ½ âš¡åªå½±å“ä¸€ä¸ªå…ƒç´ æ ·å¼ï¼Œè®¡ç®—é‡æå°\nçµæ´» ğŸ’¥å¯ä»¥ç»™é¡¹ç›®å…¨å±€è‡ªé€‚åº”ï¼Œä¹Ÿå¯ä»¥å•ç‹¬é¡µé¢åšè‡ªé€‚åº”\nåŸç†å³åœ¨ scale ç­‰æ¯”ç¼©æ”¾çš„åŸºç¡€ä¸Šï¼Œè·å–å±å¹•çš„å®½åº¦é™¤ä»¥è®¾è®¡ç¨¿çš„å®½åº¦ï¼Œè·å–åˆ°å®½åº¦æ¯”ä¾‹å€¼ï¼›è·å–å±å¹•çš„é«˜åº¦é™¤ä»¥è®¾è®¡ç¨¿çš„é«˜åº¦ï¼Œè·å–åˆ°é«˜åº¦æ¯”ä¾‹å€¼ï¼›ä½¿ç”¨ transform: scale(x, x) åŠ¨æ€ç›‘å¬æ¥å®ç°é¡µé¢çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œä»è€Œè¿˜åŸ UI å›¾æ•ˆæœã€‚è¿™å¯ä»¥æ”¯æŒè®¾è®¡ç¨¿ä»¥ä¸‹çš„å„ç§åˆ†è¾¨ç‡ã€‚\nä½¿ç”¨ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253* æ ¹æ®è§†å£å°ºå¯¸è°ƒæ•´ç»™å®šå…ƒç´ çš„ç¼©æ”¾æ¯”ä¾‹ã€‚ * @param &#123;HTMLElement&#125; e - è¦è°ƒæ•´çš„å…ƒç´ ã€‚ * @param &#123;number&#125; planWidth - å…ƒç´ çš„è®¡åˆ’å®½åº¦,é»˜è®¤1980pxã€‚ * @param &#123;number&#125; planHeight - å…ƒç´ çš„è®¡åˆ’é«˜åº¦,é»˜è®¤1080pxã€‚ */    function selfAdaption(e, planWidth = 1980, planHeight = 1080) &#123;      /**       * è·å–å®¢æˆ·ç«¯è§†å£çš„å½“å‰å°ºå¯¸ï¼Œå¹¶æ ¹æ®æœ€å°è®¡åˆ’å°ºå¯¸è¿›è¡Œè°ƒæ•´ã€‚       * @returns &#123;&#123;width: number, height: number&#125;&#125; å®¢æˆ·ç«¯è§†å£çš„è°ƒæ•´åå®½åº¦å’Œé«˜åº¦ã€‚       */      console.log(planWidth, planHeight);      const getClientDimensions = () =&gt; &#123;        // è·å–å®¢æˆ·ç«¯è§†å£çš„å½“å‰å®½åº¦å’Œé«˜åº¦        let width = document.body.clientWidth || document.documentElement.clientWidth;        let height = document.body.clientHeight || document.documentElement.clientHeight;        // å¦‚æœè®¡åˆ’é«˜åº¦å°äº1080ï¼Œåˆ™è¿›è¡Œé«˜åº¦è°ƒæ•´        if (planHeight &lt; 1080) &#123;          height -= (1080 - planHeight);        &#125;        // å¦‚æœè®¡åˆ’å®½åº¦å°äº1920ï¼Œåˆ™è¿›è¡Œå®½åº¦è°ƒæ•´        if (planWidth &lt; 1920) &#123;          width -= (1920 - planWidth);        &#125;        return &#123; width, height &#125;;      &#125;;      /**       * æ ¹æ®å½“å‰è§†å£å°ºå¯¸æ›´æ–°å…ƒç´ çš„ç¼©æ”¾æ¯”ä¾‹ã€‚       */      const updateScale = () =&gt; &#123;        // è·å–è°ƒæ•´åçš„å®¢æˆ·ç«¯å°ºå¯¸        const &#123; width, height &#125; = getClientDimensions();        // è®¡ç®—å®½åº¦å’Œé«˜åº¦çš„ç¼©æ”¾æ¯”ä¾‹        const ratioWidth = width / planWidth;        const ratioHeight = height / planHeight;        // å¯¹å…ƒç´ åº”ç”¨ç¼©æ”¾å˜æ¢        e.style.transform = `scale($&#123;ratioWidth&#125;, $&#123;ratioHeight&#125;)`;      &#125;;      // è®¾ç½®å…ƒç´ çš„åˆå§‹æ ·å¼      e.style.cssText += `    transform-origin: 0 0 0;    display: flex;    min-width: auto;    min-height: auto;    overflow: hidden;    width: $&#123;planWidth&#125;px;    height: $&#123;planHeight&#125;px;  `;      // åˆå§‹æ›´æ–°ç¼©æ”¾æ¯”ä¾‹      updateScale();      // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œåœ¨çª—å£è°ƒæ•´å¤§å°æ—¶æ›´æ–°ç¼©æ”¾æ¯”ä¾‹      window.addEventListener(&#x27;resize&#x27;, updateScale);    &#125;selfAdaptionï¼ˆeï¼‰ä¼ é€’çš„è¦è‡ªé€‚åº”æœ€å¤–å±‚dom\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨ transform: scale è‡ªé€‚åº”åï¼Œåœ°å›¾ä¸Šç‚¹å‡»äº‹ä»¶å¤±æ•ˆï¼Œè§£å†³åŠæ³•ï¼š\n12345678910resetMapSize() &#123;Â Â       let mapContent = document.getElementById(&quot;map&quot;);Â Â       mapContent.style.transform = `scale($&#123;1 / ratioWidth&#125;,$&#123;1 / ratioHeight&#125;)`Â Â     &#125;Â Â // ç”¨å®Œåè®°å¾—é”€æ¯ç›‘å¬äº‹ä»¶ æ¯”å¦‚ vue ä¸­Â Â destroyed () &#123;Â Â     window.removeEventListener(&#x27;resize&#x27;,this.resetMapSize)Â Â   &#125;Â \n","slug":"å‰ç«¯å¤§å±è‡ªé€‚åº”æ–¹æ¡ˆ","date":"2024-09-12T02:58:20.000Z","categories_index":"JS","tags_index":"JS","author_index":"æƒæ ˆ"},{"id":"32c8c23c6d89385feba3d0e7e602221c","title":"Vue3.5 æºç è§£æï¼Œ useTemplateRef å®ç°åŸç†","content":"useTemplateRef çš„ä½œç”¨useTemplateRef æ˜¯ç”¨æ¥ä¸“é—¨è·å– dom æˆ–è€… ç»„ä»¶ç¤ºä¾‹ çš„ã€‚\nåœ¨ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è·å– dom ï¼Œé‚£ä¹ˆéœ€è¦è¿™ä¹ˆåšï¼š\n\nå…ˆä¸º dom æŒ‡å®š ref å±æ€§ï¼Œå¹¶ä¸”ç»™å®šä¸€ä¸ª value å€¼\n\nåœ¨ js ä¸­ï¼Œå£°æ˜ value å€¼çš„å˜é‡ï¼Œå¹¶ä¸”ç»™å®šåˆå§‹å€¼ä¸º ç©ºçš„ ref\n12345678910&lt;script setup&gt;// é¦–å…ˆï¼Œæ‚¨å®šä¹‰äº†ä¸€ä¸ªå€¼ä¸ºundefinedæˆ–ç©ºçš„ref// å¹¶ä»¥æ‚¨æƒ³è¦çš„æ–¹å¼å‘½åç”Ÿæˆçš„å¯ç”¨å†…å®¹const divEl = ref();&lt;/script&gt;&lt;template&gt;&lt;!-- ç„¶åä½¿ç”¨ä¸â€œrefâ€å±æ€§çš„å€¼ç›¸åŒçš„åç§°,åœ¨æ¨¡æ¿ä¸­çš„æŸä¸ªåœ°æ–¹ --&gt;&lt;div ref=&quot;divEl&quot; &gt;&lt;/div&gt;&lt;/template&gt;\n\nä½†æ˜¯ï¼Œè¿™ç§æ–¹æ¡ˆå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ï¼šref é€šå¸¸ç”¨æ¥å£°æ˜å“åº”å¼æ•°æ®ã€‚å½“ ref ä¸å…‰ä½œä¸ºå“åº”å¼å£°æ˜ï¼Œè¿˜è¢«ä½œä¸º dom å®ä¾‹çš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±éš¾å…æœ‰ç‚¹è®©äººç–‘æƒ‘äº†ã€‚\næ‰€ä»¥åœ¨ï¼ˆ3.5 ä¹‹åï¼‰ Vue æ¨å‡ºäº†ä¸€ä¸ªæ–°çš„ API å«åš useTemplateRef æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n123456789101112131415&lt;template&gt; &lt;div&gt;  &lt;div ref=&quot;el&quot;&gt;ç¨‹åºå‘˜Sunday&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted, useTemplateRef &#125; from &#x27;vue&#x27;const elRef = useTemplateRef(&#x27;el&#x27;)onMounted(() =&gt; &#123; console.log(elRef.value) // dom ç¤ºä¾‹&#125;)&lt;/script&gt;\n\nuseTemplateRef çš„å®ç°åŸç†1234567891011121314export function useTemplateRef(key: Keys) &#123;  const i = getCurrentInstance();  const r = shallowRef(null);  if (i) &#123;    const refs = i.refs === EMPTY_OBJ ? (i.refs = &#123;&#125;) : i.refs;    Object.defineProperty(refs, key, &#123;      enumerable: true,      get: () =&gt; r.value,      set: (val) =&gt; (r.value = val),    &#125;);  &#125;  return r;&#125;\n\nç¬¬ä¸€ä¸ª iï¼šé€šè¿‡ getCurrentInstance() è·å–ï¼Œå¾—åˆ°çš„æ˜¯ ä¸Šä¸‹æ–‡å®ä¾‹ã€‚â€‹ æ¥ä¸‹æ¥ï¼Œé€šè¿‡ i.refs è·å–åˆ°æ‰€æœ‰çš„ ref æ•°æ®ï¼Œç„¶åä¸º refs æ·»åŠ  Object.defineProperty çš„ç›‘å¬ï¼Œç›‘å¬çš„å±æ€§åå°±æ˜¯å…¥å‚ keyã€‚å¦‚æœä»¥ useTemplateRef(â€˜elâ€™) ä¸ºä¾‹ï¼Œé‚£ä¹ˆå°±æ˜¯ â€œelâ€ã€‚\né€šè¿‡ç›‘å¬å¯¹åº” key çš„ get å’Œ set æ ‡è®°ï¼Œè¿™é‡Œ é‡ç‚¹å…³æ³¨ set æ ‡è®°ï¼Œåœ¨è¿™é‡Œä¸º r.value è¿›è¡Œäº†èµ‹å€¼ï¼Œå³ï¼šr.value &#x3D; valã€‚è¿™é‡Œçš„ val å°±æ˜¯ refs[key] çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„ ref ç»„ä»¶å®ä¾‹ã€‚\nç¬¬äºŒä¸ª rï¼šé€šè¿‡ shallowRef(null) è·å–ï¼Œä½œä¸ºè¿”å›å€¼r ä½œä¸º useTemplateRef çš„è¿”å›å€¼å³ æœ€ç»ˆè·å–çš„ç»„ä»¶ç¤ºä¾‹ã€‚\n","slug":"Vue3.5 æºç è§£æï¼Œ useTemplateRef å®ç°åŸç†","date":"2024-09-06T06:07:04.000Z","categories_index":"","tags_index":"Vue3","author_index":"æƒæ ˆ"},{"id":"c34479c7fc43ef2eede71b250f18b4aa","title":"refå’ŒreactiveåŸç†","content":"refref çš„å¤„ç†ä¸Šå°±æ˜¯å…ˆå°†åŸºæœ¬ç±»å‹è½¬æ¢æˆå¯¹è±¡ç±»å‹ï¼Œç„¶ååœ¨é‡Œé¢åŠ å…¥ä¸€ä¸ª this._v_isRef çš„å¸ƒå°”ç±»å‹çš„å€¼ï¼Œæ¥åˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯è¢« ref å¤„ç†äº†ï¼Œç„¶åå°†ä¸Šé¢å†™çš„ track å’Œ trigger å‡½æ•°å†™å…¥ get å’Œ set å‡½æ•°é‡Œé¢ï¼Œå¦‚æœä½ è¦å¤„ç†çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ vue3 å°±ä¼šæŠŠå®ƒæ”¹æˆ reactive çš„å¤„ç†æ–¹å¼ã€‚æ‰€ä»¥è¯´ï¼Œref å¯ä»¥å¤„ç†åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼Œè€Œ reactive å¤„ç†çš„æ˜¯å¼•ç”¨ç±»å‹ï¼ŒäºŒè€…çš„åŒºåˆ«ä¸æ˜¯å¾ˆå¤§ã€‚\nreactive\né¦–å…ˆæˆ‘ä»¬å–ä¸€ä¸ªå¯¹è±¡{a: 1}\n\nç„¶åè°ƒç”¨å°è£…å¥½çš„ reactive å‡½æ•° const state &#x3D; reactive({a: 1})\n\nè¿™ä¸ªæ—¶å€™å°±ä¼šè¿›å…¥ä»£ç ç‰‡æ®µ 1.1 é‡Œé¢çš„ reactive å‡½æ•°ï¼Œåœ¨è¿›å…¥ createReactiveObject å‡½æ•°\n\nç„¶åå°±ä¼šå¯¹æˆ‘ä»¬è¦ä»£ç†çš„å¯¹è±¡è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯å¯¹è±¡çš„è¯å°±ç»§ç»­ä¸‹å»\n\nåœ¨åˆ¤æ–­æˆ‘ä»¬æ˜¯ä¸æ˜¯å·²ç»ä»£ç†è¿‡è¿™ä¸ªå¯¹è±¡ï¼ˆå°±æ˜¯æˆ‘ä»¬é¢„å…ˆç©ºå‡ºä¸€ä¸ªä½ç½®ï¼Œå°†å·²ç»ä»£ç†è¿‡çš„å¯¹è±¡å…¨éƒ¨å­˜å‚¨ä¸‹æ¥ï¼‰ï¼Œä»£ç†è¿‡å°±è¿”å›ä»£ç†åçš„å€¼ï¼Œæ²¡æœ‰çš„è¯å°±åˆ›å»ºä¸€ä¸ªæ–°çš„ä»£ç†\n\nå†ç„¶åç»‘å®šä¸Š proxy å‡½æ•°é‡Œé¢çš„ get å’Œ set å›è°ƒå‡½æ•°ï¼ˆå¯ä»¥çœ‹åˆ°ä»£ç  1.2ï¼‰\n\n\n","slug":"refå’ŒreactiveåŸç†","date":"2024-08-27T08:30:20.000Z","categories_index":"","tags_index":"Vue3","author_index":"æƒæ ˆ"},{"id":"2e839452302506867eaaf60fd116d0d6","title":"vue3 Api","content":"defineProps()å’Œ defineEmits()\nv-model:childValueModel ä¿®æ”¹äº†å€¼ æœ¬æ¥åº”è¯¥æ˜¯ modeValue\ndefineEmites() ä½¿ç”¨è¦æ·»åŠ  update:\n1&lt;defineModelChild v-model;childValueModel=&quot;childValue&quot;&gt;&lt;/defineModelChild&gt;\n\nâ€‹\n123456789&lt;template&gt;&lt;div&gt;&#123;&#123; childValueModel &#125;&#125;&lt;/div&gt;&lt;button @click=&quot;myEmits(&#x27;update:childValueModel&#x27;, childValueModel + 1)&quot;&gt;æ•°æ® + 1&lt;/button&gt;&lt;/template&gt;&lt;script setup&gt;const myProps = defineProps([&#x27;childValueModel&#x27;]);const myEmits= defineEmits([&#x27;update:childValueModel&#x27;]);&lt;/script&gt;\n\nçˆ¶ç»„ä»¶\n12345678910111213&lt;script setup&gt;import HelloWorld from &#x27;./components/defineProps-----defineEmits .vue&#x27;//çˆ¶ç»„ä»¶function count(value) &#123;  console.log(value);&#125;&lt;/script&gt;&lt;template&gt;  &lt;HelloWorld a=&quot;qwdqwd&quot;    @count=&#x27;count&#x27; /&gt;&lt;/template&gt;\n\nå­ç»„ä»¶\n1234567891011121314151617&lt;script setup&gt;import &#123; ref &#125; from &quot;vue&quot;//å­ç»„ä»¶let count = ref(0)let emit = defineEmits([&quot;count&quot;])const props = defineProps((&#123;  a: String&#125;))function increment() &#123;  count.value++  emit(&quot;count&quot;, count.value)&#125;&lt;/script&gt;&lt;template&gt;  &lt;button @click=&quot;increment&quot;&gt;&#123;&#123; count &#125;&#125; &#123;&#123;props.a&#125;&#125;&lt;/button&gt;&lt;/template&gt;\n\ndefineModel() 3.4+ç‰ˆæœ¬\ndefineModel å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæ˜¯å¯¹ v-model å†åŒ…è£…çš„è¯­æ³•ç³–\ndefineModel å¸®ä½ è·å–åˆ°äº† prop ä¸­çš„ modelValue ï¼Œä¸”å½“ å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨å¸®ä½ è°ƒç”¨ update:modelValue\n123456const myProps = defineProps([&quot;modelValue&quot;]);const myEmits = defineEmits([&quot;update:modelValue&quot;]);// è¯´ç™½äº†ï¼Œè¿™é‡Œçš„ modelValue ç­‰ä»·äº props.modelValue + emit(&#x27;update:modelValue&#x27;)// defineModel å¸®ä½  å°è£…äº† modelValue å’Œ update:modelValueconst modelValue = defineModel();\n\nçˆ¶ç»„ä»¶\n12345678910&lt;template&gt;  &lt;defineModelChild v-model=&quot;childValue&quot;&gt;&lt;/defineModelChild&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;;import defineModelChild from &#x27;./components/defineModelChild.vue&#x27;;const childValue = ref(0);&lt;/script&gt;\n\nv-model å­ç»„ä»¶\n1234567891011&lt;template&gt;&lt;template&gt;  &lt;div&gt;&#123;&#123; modelValue &#125;&#125;&lt;/div&gt;  &lt;button @click=&quot;myEmits(&#x27;update:modelValue&#x27;, modelValue + 1)&quot;&gt;æ•°æ® + 1&lt;/button&gt;&lt;/template&gt;&lt;script setup&gt;defineProps([&#x27;modelValue&#x27;]);const myEmits = defineEmits([&#x27;update:modelValue&#x27;]);&lt;/script&gt;\n\ndefineModel() å­ç»„ä»¶\n12345678&lt;template&gt;  &lt;div&gt;&#123;&#123; modelValue &#125;&#125;&lt;/div&gt;  &lt;button @click=&quot;modelValue++&quot;&gt;æ•°æ® + 1&lt;/button&gt;&lt;/template&gt;&lt;script setup&gt;const modelValue = defineModel();&lt;/script&gt;\n\ndefineExpose å­ä¼ çˆ¶\nï¼ˆç”¨åœ¨å­ç»„ä»¶ï¼Œæš´éœ²æƒ³ä¼ é€’çš„å€¼æˆ–æ–¹æ³•ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ ref å±æ€§è·å–å­ç»„ä»¶æš´éœ²çš„ï¼‰\nä½¿ç”¨ script setup çš„ç»„ä»¶æ˜¯é»˜è®¤å…³é—­çš„â€”â€”å³é€šè¿‡æ¨¡æ¿å¼•ç”¨æˆ–è€… $parent é“¾è·å–åˆ°çš„ç»„ä»¶çš„å…¬å¼€å®ä¾‹ï¼Œä¸ä¼šæš´éœ²ä»»ä½•åœ¨ script setup ä¸­å£°æ˜çš„ç»‘å®šã€‚\né‚£ä¹ˆï¼Œé€šè¿‡ defineExpose ç¼–è¯‘å™¨å®æ¥æ˜¾å¼æŒ‡å®šåœ¨\nç„¶åï¼Œçˆ¶ç»„ä»¶é€šè¿‡ ref å±æ€§è®¿é—®å­ç»„ä»¶\nçˆ¶ç»„ä»¶ï¼š\n123456789101112131415161718&lt;Index ref=&quot;childeRef&quot;&gt;&lt;/Index&gt;&lt;script setup&gt;    import Index from &quot;./index.vue&quot;;    const childeRef = ref();    function test() &#123;        console.log(childeRef.value.msg) // Hello World    &#125;    onMounted(() =&gt; &#123;      let flag:boolean = true;      let value:number= 5;      childeRef.value.childFn(flag,value) // è°ƒç”¨å­ç»„ä»¶å‡½æ•°, è¾“å‡º 6    &#125;)&lt;/script&gt;\n\nå­ç»„ä»¶ï¼š\n1234567891011121314151617&lt;script setup&gt;    import &#123;ref&#125; from &quot;vue&quot;;    function childFn(typeï¼šboolean, dataï¼šnumber) &#123;        console.log(&#x27;æˆ‘æ˜¯å­ç»„ä»¶&#x27;);        if(data)&#123;           let value = data + 1;           return value;        &#125;    &#125;    const msg = &#x27;Hello World&#x27;;    defineExpose(&#123; //æš´éœ²æƒ³è¦ä¼ é€’çš„å€¼æˆ–æ–¹æ³•        msg,        childFn,    &#125;);&lt;/script&gt;\n\ndefineOptions 3.3+\n123456789&lt;script setup&gt;import &#123; defineOptions &#125; from &#x27;vue&#x27;defineOptions(&#123;name: &#x27;Foo&#x27;,//ç»„ä»¶é‡å‘½å inheritAttrs: false,//...æ›´å¤šè‡ªå®šä¹‰å±æ€§&#125;)&lt;/script&gt;\n\ncomputed è®¡ç®—å±æ€§\n1234567891011121314151617181920212223&lt;script setup &gt;import &#123; computed, reactive &#125; from &quot;vue&quot;;const author = reactive(&#123;  books: [    &#x27;Vue 2 - Advanced Guide&#x27;,    &#x27;Vue 3 - Basic Guide&#x27;,    &#x27;Vue 4 - The Mystery&#x27;  ]&#125;)const publishedBooksMessage = computed(() =&gt; &#123;  return author.books.length &gt; 0 ? &#x27; Yes&#x27; : &quot;No&quot;&#125;)&lt;/script&gt;&lt;template&gt;  &lt;div&gt;    &#123;&#123; publishedBooksMessage &#125;&#125;  &lt;/div&gt;&lt;/template&gt;&lt;style  scoped&gt;&lt;/style&gt;\n\ncomputed ä¼ å‚\n12345678910111213141516171819202122232425262728&lt;script setup &gt;import &#123; computed, reactive &#125; from &quot;vue&quot;;const author = reactive(&#123;  name: &#x27;John Doe&#x27;,  books: [    &#x27;Vue 2 - Advanced Guide&#x27;,    &#x27;Vue 3 - Basic Guide&#x27;,    &#x27;Vue 4 - The Mystery&#x27;  ]&#125;)const publishedBooksMessage = computed(() =&gt; &#123;  return function (value) &#123;    console.log(value)    return author.books.length &gt; 0 ? &#x27; Yes&#x27; : &quot;No&quot;  &#125;&#125;)&lt;/script&gt;&lt;template&gt;  &lt;div&gt;    &lt;p&gt;Has published books:&lt;/p&gt;    &#123;&#123; publishedBooksMessage(12) &#125;&#125;  &lt;/div&gt;&lt;/template&gt;&lt;style  scoped&gt;&lt;/style&gt;\n\nwatch ç›‘å¬\né»˜è®¤å¼€å¯æ·±åº¦ç›‘å¬\n123456789101112131415161718192021222324252627282930&lt;script setup &gt;import &#123; ref, watch &#125; from &quot;vue&quot;const count = ref(0)const btnClick = () =&gt; &#123;  count.value++;&#125;// âœ… æ–¹æ³•ä¸€ï¼Œä¼ é€’å“åº”å¯¹è±¡watch(count, (newValue, oldValue) =&gt; &#123;  console.log(newValue, oldValue)&#125;)// âŒ æ–¹æ³•äºŒï¼šä¼ é€’å“åº”å¯¹è±¡ä¸‹çš„å±æ€§watch(user.name, (value) =&gt; &#123;    console.log(value) // ç›‘å¬å¤±è´¥ï¼Œæ²¡è¾“å‡º&#125;)// âœ… æ–¹æ³•ä¸‰ï¼šä¼ é€’å‡½æ•°ï¼Œå‡½æ•°è¿”å›å“åº”å¯¹è±¡å±æ€§watch(() =&gt; user.name, (value) =&gt; &#123;    console.log(value); // ç›‘å¬æˆåŠŸï¼Œè¾“å‡º jake&#125;)&lt;/script&gt;&lt;template&gt;  &lt;div&gt;    &lt;button @click=&quot;btnClick&quot;&gt;ç‚¹å‡»&lt;/button&gt;    &#123;&#123; count &#125;&#125;  &lt;/div&gt;&lt;/template&gt;&lt;style  scoped&gt;&lt;/style&gt;\n\nwatchEffect çš„ä½¿ç”¨\nwatchEffect ä¹Ÿæ˜¯ä¸€ä¸ªå¸§å¬å™¨ï¼Œæ˜¯ä¸€ä¸ªå‰¯ä½œç”¨å‡½æ•°ã€‚ å®ƒä¼šç›‘å¬å¼•ç”¨æ•°æ®ç±»å‹çš„æ‰€æœ‰å±æ€§ï¼Œä¸éœ€è¦å…·ä½“åˆ°æŸä¸ªå±æ€§ï¼Œä¸€æ—¦è¿è¡Œå°±ä¼šç«‹å³ç›‘å¬ï¼Œç»„ä»¶å¸è½½çš„æ—¶å€™ä¼šåœæ­¢ç›‘å¬ã€‚\n123456789101112131415161718192021222324&lt;script setup &gt;import &#123; reactive, ref, watch, watchEffect &#125; from &quot;vue&quot;const count = reactive(&#123; name: &#x27;112&#x27;, data: [&quot;ä½ å¥½&quot;] &#125;)const btnClick = () =&gt; &#123;  count.data[0] = &#x27;è¢«æ”¹äº†&#x27;&#125;watchEffect(() =&gt; &#123;  console.log(count.data[0]);&#125;) watch([count,obj],() =&gt; &#123;      console.log(&#x27;ç›‘å¬çš„å¤šä¸ªæ•°æ®æ”¹å˜äº†&#x27;)    &#125;)&lt;/script&gt;&lt;template&gt;  &lt;div&gt;    &lt;button @click=&quot;btnClick&quot;&gt;ç‚¹å‡»&lt;/button&gt;    &#123;&#123;count.data[0]&#125;&#125;  &lt;/div&gt;&lt;/template&gt;&lt;style  scoped&gt;&lt;/style&gt;\n\nstopWatchEffect åœæ­¢ç›‘å¬\n1234567const stop = watchEffect(() =&gt; &#123;  console.log(&quot;name:&quot;, obj.name);&#125;);const stopWatchEffect = () =&gt; &#123;  console.log(&quot;åœæ­¢ç›‘å¬&quot;);  stop();&#125;;\n\nonInvalidate å‡½æ•° è§£å†³æ‰§è¡Œé¡ºåºä¹±çš„é—®é¢˜\n","slug":"vue3 Api","date":"2024-06-13T08:39:58.000Z","categories_index":"","tags_index":"Vue3","author_index":"æƒæ ˆ"}]